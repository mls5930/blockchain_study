## ì˜¤ëŠ˜ ë­ê°€ ì–´ë ¤ì› ì–´?

### ìºì‹±

ìºì‹± => ê¸°ì–µí•´ë‘”ë‹¤.

ë©”ëª¨ì´ì œì´ì…˜
ìºì‹±

ê³µë¶€í•´ë‘ë©´ ì¢‹ì•„ìš”.

ìµœì í™”

React.memo()
useMemo()
useCallback

ì „ì—­ ìƒíƒœ ê´€ë¦¬

useContext

ê¶ê·¹ì ì¸ ëª©í‘œ

ë¦¬ì•¡íŠ¸ ëª¨í† ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì“¸ë°ì—†ëŠ” ë¦¬ë Œë”ë§ë„ ë°©ì§€í•˜ì ì´ê±°ì•¼.  
ê·¼ë° ë¦¬ë Œë”ë§ ë¹„ìš©ê°’ì€ ê·¸ë ‡ê²Œ ë¹„ì‹¸ì§€ ì•ŠìŒ.  
=> ì§€ê¸ˆì€ ë¨¸ë¦¬ê°€ ê¹¨ì§€ê² ì§€ë§Œ, ë°˜ë“œì‹œ ì•Œì•„ì•¼í•˜ëŠ” `ê°œë…`ì…ë‹ˆë‹¤.

## ë‹¤ë¥¸ ê¸€ ë³´ë‹ˆê¹Œ ìºì‹±ì´ ì‹ ì„ í•œê±¸ë¡œ êµì²´í•œë‹¤ë¼ê³  í‘œí˜„í•¨.

ì•Œì•„ì•¼ í•  ê²ƒì´ ìˆìŒ.  
ê¸€ì„ ì˜ ëª» ë³¸ê±°ì•¼(ì„¤ëª…í•˜ëŠ” ê¸°ì¤€ì´ ë‹¤ë¥¸ ê¸€)

## ë¦¬ì•¡íŠ¸ì˜ ìºì‹± ê°œë…ê³¼ ë¦¬ì•¡íŠ¸-ì¿¼ë¦¬(ë¼ì´ë¸ŒëŸ¬ë¦¬)ì˜ ìºì‹± ê°œë…ì€ ë¹„ìŠ·í•˜ì§€ë§Œ ë‹¤ë¦„!

### ë¦¬ì•¡íŠ¸ìì²´ì—ì„œì˜ ìºì‹±

React ìì²´ëŠ” ë¸Œë¼ìš°ì €ì—ì„œ ë Œë”ë§ ì„±ëŠ¥ì„ ìµœì í™”í•˜ê¸° ìœ„í•´ ì»´í¬ë„ŒíŠ¸ ê¸°ë°˜ì˜ ë©”ëª¨ì´ì œì´ì…˜ ë° ë¦¬ë Œë”ë§ ìµœì í™” ê¸°ë²•ì„ ì‚¬ìš©
=> `ë¸Œë¼ìš°ì €ì˜ ë Œë”ë§` ê¸°ì¤€ìœ¼ë¡œ ìµœì í™”

### ë¦¬ì•¡íŠ¸ ì¿¼ë¦¬ì—ì„œì˜ ìºì‹± ê°œë…

ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¬ ë•Œ ìºì‹±ì„ í™œìš©í•˜ì—¬ ë¶ˆí•„ìš”í•œ ë„¤íŠ¸ì›Œí¬ ìš”ì²­ì„ ë°©ì§€
=> ë„¤íŠ¸ì›Œí¬ ë¹„ìš© ê¸°ì¤€

ë”°ë¼ì„œ, ë§Œì•½ API ë°ì´í„°ë¥¼ ìºì‹±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ëª©ì ì´ë¼ë©´ React Queryë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ ì ì ˆí•˜ê³ , **ë Œë”ë§ ì„±ëŠ¥ì„ ìµœì í™”í•˜ê³  ì‹¶ë‹¤ë©´ React.memo, useMemo, useCallback ê°™ì€ ê¸°ë²•ì„ í™œìš©í•˜ëŠ” ê²ƒì´ ì ì ˆí•©ë‹ˆë‹¤**.

## ì½œë°±ê³¼ ì½œë°± ì‚¬ìš©ë²•

ê·¸ëŸ¬ë‹ˆê¹Œ, ì–¸ì œ ì‚¬ìš©í•´ì•¼í•˜ëŠ”ì§€ ëª¨ë¥´ê² ìŒ.
ê·¸ëŸ¬ë©´ ì§ˆë¬¸í• ê²Œ ëª‡ ê°€ì§€ ìˆìŒ

## memo

ì‚¬ìš©í•˜ëŠ” ì£¼ì²´: ì»´í¬ë„ŒíŠ¸

```jsx
import { memo, useMemo, useCallback, useState } from "react"

const Child = () => {
    console.log("ë‚˜ëŠ” Child! í˜¸ì¶œë ê¹Œ?");
    
    return (
        <button>ì§„ì§œ?</button>
    )
}

export const Counter = () => {
    const [count, setCount] = useState(0);

    return (
        <>
            {count}
            <button onClick={() => setCount(count + 1)}>+</button>
            <Child parentCount={count}/>
        </>
    )
}
```

1. ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤
2. ìƒíƒœê°€ ë³€ê²½ë¨ì„ ë¦¬ì•¡íŠ¸ê°€ ì•ˆë‹¤
3. Counterì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ìƒì„±(ì¬í‰ê°€ ì¬ì‹¤í–‰)ëœë‹¤.
4. Child ì»´í¬ë„ŒíŠ¸ë„ ë‹¤ì‹œ ìƒì„±(ì¬í‰ê°€ ì¬ì‹¤í–‰)ëœë‹¤.

```jsx
import { memo, useMemo, useCallback, useState } from "react"

const Child = (props) => {
    console.log("ë‚˜ëŠ” Child! í˜¸ì¶œë ê¹Œ?");
    
    return (
        <button>ì§„ì§œ?</button>
    )
};

export const Counter = () => {
    const [count, setCount] = useState(0);

    return (
        <>
            {count}
            <button onClick={() => setCount(count + 1)}>+</button>
            <Child/>
        </>
    )
}
```

1. ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤
2. ìƒíƒœê°€ ë³€ê²½ë¨ì„ ë¦¬ì•¡íŠ¸ê°€ ì•ˆë‹¤
3. Counterì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ìƒì„±(ì¬í‰ê°€ ì¬ì‹¤í–‰)ëœë‹¤.
4. Child ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬ëœ propsë¥¼ ë¹„êµí•œë‹¤
5. ì´ì „ props, ì´í›„ props ë¹„êµ
6. ë˜‘ê°™ë‹¤ë©´, Child ì»´í¬ë„ŒíŠ¸ ìƒì„± ì•ˆí•¨(ë¦¬ë Œë”ë§ ì•ˆí•¨)

ë§Œì•½, propsë¡œ ë˜ì§„ë‹¤ë©´?

```jsx
import { memo, useMemo, useCallback, useState } from "react"

const Child = (props) => {
    console.log("ë‚˜ëŠ” Child! í˜¸ì¶œë ê¹Œ?");
    
    return (
        <button>ì§„ì§œ?</button>
    )
};

export const Counter = () => {
    const [count, setCount] = useState(0);

    return (
        <>
            {count}
            <button onClick={() => setCount(count + 1)}>+</button>
            <Child parentCount={count}/>
        </>
    )
}
```

1. ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤
2. ìƒíƒœê°€ ë³€ê²½ë¨ì„ ë¦¬ì•¡íŠ¸ê°€ ì•ˆë‹¤
3. Counterì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ì‹¤í–‰(ì¬í‰ê°€ ì¬ì‹¤í–‰)ëœë‹¤.
4. Child ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬ëœ propsë¥¼ ë¹„êµí•œë‹¤
5. ì´ì „ props, ì´í›„ props ë¹„êµ
6. ëˆ„ë¥¼ë•Œë§ˆë‹¤ count ìƒíƒœê°’ì´ ë³€í•˜ë‹ˆ, Child ì»´í¬ë„ŒíŠ¸ë¥¼ ë‹¤ì‹œ ìƒì„±(ì¬í‰ê°€, ì¬ì‹¤í–‰)

## useMemo

ë¹„êµí•˜ëŠ” ê¸°ì¤€: í•¨ìˆ˜ì˜ ë°˜í™˜`ê°’`

```jsx
import { memo, useMemo, useCallback, useState } from "react"

const Child = memo((props) => {
    console.log("ë‚˜ëŠ” Child! í˜¸ì¶œë ê¹Œ?");
    console.log(props.parentCount);
    
    return (
        <>
            {props.parentCount}
            <button>ì§„ì§œ?</button>
        </>
        
    )
})

export const Counter = () => {
    const [count, setCount] = useState(0);

    const computed = () => {
        console.log("ë‚˜ëŠ” ë¹„ì‹¼ ì—°ì‚°");
        let number = 0;
        for(let i = 1; i <= 1000000000; i++) {
            number = number + i;
        }
        console.log(number);
        return number;
    }
    
    computed();

    return (
        <>
            {count}
            <button onClick={() => setCount(count + 1)}>+</button>
            <Child parentCount={count} />
        </>
    )
}
```

1. ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤
2. ìƒíƒœê°€ ë³€ê²½ë¨ì„ ë¦¬ì•¡íŠ¸ê°€ ì•ˆë‹¤
3. Counterì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ìƒì„±(ì¬í‰ê°€ ì¬ì‹¤í–‰)ëœë‹¤.
4. computedí•¨ìˆ˜ê°€ ì¬í‰ê°€, ì¬ì‹¤í–‰(ë‹¤ì‹œ ì—°ì‚°)

ê²°êµ­, ëˆ„ë¥¼ë•Œë§ˆë‹¤ ë‹¤ì‹œ ê³„ì‚°í•˜ê³  í˜¸ì¶œí•œë‹¤
=> ë„ˆë¬´....ë¶ˆí•„ìš”í•¨
=> ë°˜í™˜ê°’ì´ ë³€ê²½ë˜ë©´ ë‹¤ì‹œ ê³„ì‚°ì„ í•´ì•¼ê² ì§€
=> ê·¼ë°, ë°˜í™˜ê°’ì´ ë³€ê²½ì´ ì•ˆë˜ì—ˆì£ ?

```jsx
import { memo, useMemo, useCallback, useState } from "react"

const Child = memo((props) => {
    console.log("ë‚˜ëŠ” Child! í˜¸ì¶œë ê¹Œ?");
    console.log(props.parentCount);
    
    return (
        <>
            {props.parentCount}
            <button>ì§„ì§œ?</button>
        </>
        
    )
})

export const Counter = () => {
    const [count, setCount] = useState(0);

    const computed = useMemo(() => {
        console.log("ë‚˜ëŠ” ë¹„ì‹¼ ì—°ì‚°");
        let number = 0;
        for(let i = 1; i <= 1000000000; i++) {
            number = number + i;
        }
        return number;
    }, [])
    
    computed();

    return (
        <>
            {count}
            <button onClick={() => setCount(count + 1)}>+</button>
            <Child parentCount={count} />
        </>
    )
}
```

1. ë²„íŠ¼ì„ ëˆ„ë¥¸ë‹¤
2. ìƒíƒœê°€ ë³€ê²½ë¨ì„ ë¦¬ì•¡íŠ¸ê°€ ì•ˆë‹¤
3. Counterì»´í¬ë„ŒíŠ¸ê°€ ë‹¤ì‹œ ìƒì„±(ì¬í‰ê°€ ì¬ì‹¤í–‰)ëœë‹¤.
4. computedí•¨ìˆ˜ê°€ ë‹¤ì‹œ ìƒì„±(ì¬í‰ê°€, ì¬ì‹¤í–‰)
4. computedí•¨ìˆ˜ê°€ ë‹¤ì‹œ ì—°ì‚°ì„ ë•Œë¦¬ê¸°ì „ì—, ë°˜í™˜`ê°’` ë¹„êµ
5. ì´ì „ ë°˜í™˜ê°’ê³¼ ì§€ê¸ˆ ë°˜í™˜ê°’ì´ ë™ì¼í•˜ë©´, ì—°ì‚°ì„ ë•Œë¦¬ì§€ ì•ŠìŒ

ê²°êµ­, ëˆ„ë¥¼ë•Œë§ˆë‹¤ ë‹¤ì‹œ ê³„ì‚°í•˜ê³  í˜¸ì¶œí•œë‹¤
=> ë„ˆë¬´....ë¶ˆí•„ìš”í•¨
=> ë°˜í™˜ê°’ì´ ë³€ê²½ë˜ë©´ ë‹¤ì‹œ ê³„ì‚°ì„ í•´ì•¼ê² ì§€
=> ê·¼ë°, ë°˜í™˜ê°’ì´ ë³€ê²½ì´ ì•ˆë˜ì—ˆì£ ?

## ì§ˆë¬¸!

ì¦‰, ë°˜í™˜ê°’ì„ ì´ì „ ë°˜í™˜ê°’, ì´í›„ ë°˜í™˜ê°’ ë¹„êµí•´ì„œ ê¸°ì¡´ì— ì—°ì‚°í•´ë†“ì€ ë°˜í™˜ê°’ì„ ì¬ì‚¬ìš©í•¨. ê·¼ë° ê²°êµ­ ì´ê²ƒë„ ê³„ì‚° ë•Œë¦°ê±°ì•„ë‹˜? ê·¸ëŸ¼ ê³„ì‚°ì„ ë•Œë ¸ìœ¼ë©´, ì´ê²Œ.....ì´í•´ê°€ ì•ˆë˜ë„¤? ë‹¤ì‹œ ì—°ì‚°í•œê±°ì–ì•„? ë¹„êµë¥¼ í•œë‹¤ëŠ”ê±´ ê²°êµ­ í˜„ì¬ê°’ì„ ì—°ì‚°í•œê±°ì–ì•„? ê·¸ëŸ¼ useMemoëŠ” ì†ë„ê°€ ì™œ ì´ë ‡ê²Œ ë¹ ë¥´ë©°, ê²°êµ­ ë¹„êµí•˜ê¸° ì´ì „ì— ì—°ì‚°ë•Œë¦°ê±° ì•„ë‹˜?

## useMemoëŠ” ì—°ì‚° ê²°ê³¼ê°€ ì–´ì¨‹ë“ , ì´ì „ì— í•¨ìˆ˜ ë°˜í™˜ê°’ì„ ë¬´ì¡°ê±´ ì¬ì‚¬ìš©í•¨. ë‹¨, ì˜ì¡´ì„± ë°°ì—´ì„ ê°ì‹œí•˜ëŠ”ë°, ì˜ì¡´ì„± ë°°ì—´ì˜ ìƒíƒœê°€ ë³€ê²½ë˜ë©´. ë¬´ì¡°ê±´ í•¨ìˆ˜ë¥¼ ë‹¤ì‹œ ìƒì„±í•œë‹¤.

```jsx
useMemo(,[count])
```

(1) ì˜ëª»ëœ ìƒê°

```jsx
useMemo(() => computeExpensiveValue(), [count]);
```
ğŸš« ì˜ëª»ëœ ìƒê°:

computeExpensiveValue() ì—°ì‚°ì„ ë¨¼ì € ìˆ˜í–‰í•˜ê³   
ì´ì „ sum ê°’ê³¼ ìƒˆë¡œìš´ sum ê°’ì„ ë¹„êµí•˜ëŠ” ê²ƒ ì•„ë‹˜?

ğŸ‘‰ ì•„ë‹ˆë‹¤! useMemoëŠ” sum ê°’ì„ ë¹„êµí•˜ëŠ” ê²Œ ì•„ë‹ˆë¼, countê°€ ë³€ê²½ë˜ì—ˆëŠ”ì§€ë§Œ ì²´í¬í•œë‹¤.
ì¦‰, useMemoëŠ” ì—°ì‚° ê²°ê³¼(sum)ì„ ì €ì¥í•´ì„œ ë¹„êµí•˜ëŠ” ê²Œ ì•„ë‹ˆë¼,  
ì˜ì¡´ì„± ê°’(count)ì´ ë³€ê²½ë˜ì—ˆëŠ”ì§€ë§Œ ë³´ê³ , ë³€ê²½ë˜ì§€ ì•Šì•˜ìœ¼ë©´ ê¸°ì¡´ ê°’ì„ ê·¸ëŒ€ë¡œ ì¬ì‚¬ìš©í•œë‹¤.

## useCallback

í•¨ìˆ˜ ìì²´ë¥¼ ìºì‹±
ìµœì´ˆë¡œ ë Œë”ë§ ë˜ì—ˆì„ ë•Œ, í•¨ìˆ˜ê°’ì´ ì•„ë‹ˆë¼ ìì²´ë¥¼ ìºì‹±
=> ì£¼ì†Œê°’ì„

### **`memo` vs `useMemo` vs `useCallback` í•µì‹¬ ë¹„êµ**

- **"ì»´í¬ë„ŒíŠ¸ë¥¼ ìµœì í™”í•  ê²ƒì¸ê°€? ê°’(ì—°ì‚° ê²°ê³¼)ì„ ìºì‹±í•  ê²ƒì¸ê°€? í•¨ìˆ˜ ìì²´ë¥¼ ìºì‹±í•  ê²ƒì¸ê°€?"**
- **ìµœì í™” ëŒ€ìƒì´ ë‹¤ë¥´ë‹¤!**

| Hook              | ìµœì í™” ëŒ€ìƒ       | ë°˜í™˜ ê°’                     | ì‚¬ìš© ëª©ì                                         | ì£¼ìš” ì‚¬ë¡€                                    |
| ----------------- | ----------------- | --------------------------- | ------------------------------------------------ | -------------------------------------------- |
| **`memo`**        | **ì»´í¬ë„ŒíŠ¸**      | ê¸°ì¡´ ë Œë”ë§ëœ ì»´í¬ë„ŒíŠ¸ ê²°ê³¼ | **ë¶ˆí•„ìš”í•œ ìì‹ ì»´í¬ë„ŒíŠ¸ ë Œë”ë§ ë°©ì§€**           | `React.memo(Component)`                      |
| **`useMemo`**     | **ê°’(ì—°ì‚° ê²°ê³¼)** | ìºì‹±ëœ ì—°ì‚° ê²°ê³¼            | **ë¹„ì‹¼ ì—°ì‚°ì„ ìºì‹±í•˜ì—¬ ë¶ˆí•„ìš”í•œ ì¬ê³„ì‚° ë°©ì§€**    | `const result = useMemo(() => ..., [deps]);` |
| **`useCallback`** | **í•¨ìˆ˜**          | ë™ì¼í•œ í•¨ìˆ˜ ì°¸ì¡° ìœ ì§€       | **ë¶ˆí•„ìš”í•œ í•¨ìˆ˜ ì¬ìƒì„±ì„ ë°©ì§€í•˜ì—¬ props ìµœì í™”** | `const fn = useCallback(() => ..., [deps]);` |