## **함수형 컴포넌트에서의 리렌더링**  

1. **클래스형 vs 함수형 컴포넌트의 렌더링 방식 차이**

   - **클래스형 컴포넌트**는 **생명주기 메서드**(`render → componentDidUpdate`)를 따라 동작.  
   - **함수형 컴포넌트**는 **"컴포넌트 그 자체가 다시 실행됨"** → 내부의 모든 코드가 다시 평가됨.

2. **훅(Hook)의 역할**  

   - 함수형 컴포넌트는 **생명주기 메서드 대신 훅(Hook)** 을 통해 **상태 관리 및 부수 효과 관리**를 수행.
   - `useState`, `useEffect` 등은 **렌더링과 밀접한 관련이 있는 함수**.
   - 즉, **"상태(state)가 변경되면, 함수형 컴포넌트는 다시 실행(재평가)된다."** => 평가와 실행한다.

3. **핵심 현상: 리렌더링이 발생하는 이유**

   - **데이터(state)가 변경될 때마다, 함수형 컴포넌트는 처음부터 다시 실행됨.**
   - 즉, **변경된 부분만 다시 실행되는 것이 아니라, 전체 컴포넌트 함수가 재실행된다.**
   - 내부에서 정의된 **함수, 변수, 객체 등이 매번 새롭게 생성**됨.

그에 대한 증거는 이따가 리액트 설치하고 수업하면서 볼겁니당.

## **왜 이런 동작이 발생할까?**  

- **클래스형 컴포넌트는 render() 메서드 내부만 다시 실행되는데?
- 함수형 컴포넌트는 왜 전체가 다시 실행될까?**  

### **함수형 컴포넌트는 '함수'이기 때문**

- 클래스형 컴포넌트는 인스턴스를 유지하면서 일부 메서드(`render`, `componentDidUpdate`)만 실행됨.
- 하지만 **함수형 컴포넌트는 함수 그 자체**이므로, 상태(state)가 변경되면 **함수가 처음부터 다시 호출되는 것이 기본 동작**.

### **React의 선언적 UI 철학**

- React는 UI를 **"현재 상태의 함수"** 로 바라봄.  
=> 현재 상태(state)의 결과물 (상태만 잘 변경해서 알려줘! UI는 우리가 업데이트할겡!)

  ```jsx
  UI = f(state)
  ```

예를 들면, 기존의 realDOM으로 개발했던 방식은 명령형 방식이라고 함.

버튼 클릭하면 색깔 바꾸는 코드

**자바스크립트 방식**

```js
const button = document.getElementById("myButton");
button.addEventListener("click", () => {
    button.style.backgroundColor = "blue"; // 직접 DOM을 조작!
});
```

개발자: `야 잘봐 명령함!`
javascript: ㅇㅇ 리슨
개발자: `버튼 하나있거든? 이거 myButton이라는 애야. 요소 보임?` => 명령1
javascript: ㅇㅇㅇㅇ
개발자: `클릭 이벤트 등록할거임!` => 명령2
javascript: ㅇㅇㅇㅇ
개발자: `클릭할 때 색깔을 파란색으로 바꾸어줘!` => 명령3
javascript: ㅇㅋㅇㅋ
개발자: `근데 항상 내가 항상 이렇게 지정해주면 넌 왜 있냐?` => 찡찡1
javascript: ? 꼬우면 니가 자스하던가. 안바꾼다?

**리액트 방식**

```jsx
import React, { useState } from "react";

function App() {
  const [color, setColor] = useState("red");

  return (
    <button
      style={{ backgroundColor: color }}
      onClick={() => setColor("blue")} // 상태를 변경하면 UI가 알아서 바뀜!
    >
      클릭하면 색이 바뀜
    </button>
  );
}
```

개발자: `App 리액트 컴포넌트 만들었음. 상태 하나 있고, 반환(return)값으로 버튼 태그 하나 있음`
React: ㅇ? ㅇㅋㅇㅋ
개발자: `이 버튼의 색깔은 color 상태값을 따라가야 함! 그리고 클릭하면 color 상태를 "blue"로 변경함!`
React: 딸깍(변경된 color 값에 따라 UI를 다시 그림)
개발자: `개편하게 일하네`
React: ? 말이 딸깍이지 손나 열심히 그림(연산);

### 결론

- **상태(state)가 변경되면, UI를 새롭게 계산해야 함.**  
- **이 과정에서 컴포넌트 자체가 다시 실행되는 것이 React의 기본 동작 원리.**  
- **근데 React는 진짜 손나 열심히 일함.** (매번 새롭게 UI를 계산하고 그려야 하니까!)  

`최적화를 위해서 리액트 너가 뭘 하는데?`

---

### **정리: 리렌더링이 언제, 왜 발생하는가?**  

- **언제?**  

  1. `state` 또는 `props`가 변경될 때  
  2. 부모 컴포넌트가 리렌더링될 때 (자식도 함께 리렌더링됨)  
  3. `useState`, `useReducer` 등으로 상태가 갱신될 때  
  4. `useContext`를 통해 전역 상태가 변경될 때  

- **왜?**  

  - 함수형 컴포넌트는 **함수 그 자체이므로, 실행되면 처음부터 다시 평가됨.**
  - React는 **UI를 "현재 상태의 함수"로 계산**하기 때문에, **상태가 바뀔 때마다 다시 실행하는 것이 원칙**.
  - 하지만, **불필요한 리렌더링은 성능 저하를 초래**할 수 있음 → `memo`, `useMemo`, `useCallback` 등 최적화 기법이 필요함.