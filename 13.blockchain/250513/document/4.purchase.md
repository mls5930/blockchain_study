## 3. 실습 흐름 B: 다른 계정이 NFT를 구매하기

앞에서 우리는
**계정 A가 NFT를 발급하고, 컨트랙트에게 판매 권한을 위임하는 흐름**까지 직접 구현했습니다.

이제 남은 건 하나입니다.

> **계정 B가 해당 NFT를 실제로 구매하는 것.**

이 단계에서 여러분은
**구매자가 어떤 흐름을 거쳐야 실제 NFT를 가져갈 수 있는지**를 체험하게 됩니다.

---

### 1단계 – 계정 B로 지갑 전환

NFT는 **계정 기반 시스템**이기 때문에,
구매자는 반드시 **자신의 지갑으로 전환**한 상태여야 합니다.

MetaMask에서 계정을 B로 바꾸고,
다시 화면에서 **`지갑 연결`** 버튼을 눌러
현재 접속 계정이 B인지 확인합니다.

이때, 화면 상단에 표시된 주소가
B의 주소로 변경되어 있어야 합니다:

```plaintext
사용자 주소: 0xB123... (B의 주소)
```

---

### 2단계 – 구매 버튼 클릭 → `purchase(tokenId)` 호출

NFT 전체 목록 중,
내 계정이 **소유자가 아닌 NFT**에는 다음과 같은 버튼이 보일 겁니다:

```
🛒 구매하기
```

이 버튼을 누르면, 내부적으로는 다음 함수가 실행됩니다:

```ts
baseballNftTokenContract.methods
  .purchase(tokenId)
  .send({ from: account, value: price });
```

여기서 핵심은 `value`입니다.
즉, 이 거래는 단순한 전송이 아니라
**금액(ETH)을 함께 보내는 트랜잭션**이라는 점입니다.

예시로 1 ETH를 설정해 두었다면,
실제로 구매 시 1 ETH가 계정 A에게 전송되며,
NFT는 구매자인 B에게 이동됩니다.

---

### 3단계 – 구매 성공 후 소유권 확인

구매가 성공하면,
컨트랙트 내부에서 다음과 같은 일이 자동으로 벌어집니다:

```solidity
transferFrom(owner, msg.sender, tokenId)
```

즉, 판매자(A) → 구매자(B)로 **NFT의 소유권이 이전**됩니다.

그 결과, 다음 함수를 실행하면:

```solidity
ownerOf(tokenId)
```

→ 반환값은 이제 **계정 B**가 됩니다.

---

### 정리하자면…

| 단계      | 기술적 의미              | 실제로 일어나는 일           |
| --------- | ------------------------ | ---------------------------- |
| 지갑 전환 | B 계정으로 MetaMask 연결 | 구매 요청을 보낼 준비        |
| 구매 요청 | `purchase(tokenId)` 호출 | 1 ETH 전송 + NFT 소유권 이동 |
| 결과 확인 | `ownerOf(tokenId)` → B   | NFT 소유자가 B로 바뀜        |

---

### 오늘 구조의 핵심

- `purchase()`는 단순 전송 함수가 아닙니다.
- **가치를 지불하고, 권한을 받은 컨트랙트가 대신 NFT를 옮겨주는 구조**입니다.
- 이 과정 전체가 **OpenSea 같은 마켓플레이스의 최소 단위 동작 구조**와 동일합니다.
