# 블록체인 채굴에서 `difficulty = 4` (7.difficulty.md)

**"앞 4비트가 0인 해시"**를 요구하지,  
**"앞에 딱 4개의 0만 있어야 한다"**는 뜻이 아닙니다.

## `difficulty = 4`는 뭐냐?

보통 교육용 실습에서는 `difficulty = 4`라고 하면:

- "해시의 2진수 표현이 `"0000"`으로 시작하는가?"  
  → 즉, **앞 4비트가 0이냐**를 확인하는 겁니다.

```ts
binary.startsWith("0".repeat(difficulty));
```

이 코드는:

- 앞에서부터 4비트가 0이면 → 성공
- 5개, 6개, 7개가 0이어도 → 당연히 성공 (더 어려운 조건도 만족했으니까)

---

## ❌ 그렇다면 왜 "딱 4개여야 한다"는 오해가 생길까?

그건 우리가 **"조건을 만족하기 위한 최소 개수"**를 difficulty라고 부르기 때문이지,  
절대 **정확히 그 개수만 나와야 한다**는 의미는 아닙니다.

> 비트코인도 "앞 4비트가 **딱** 0이면 인정"이 아니라  
> "앞 비트들이 0이 **최소한 N개 이상** 있어야" 인정입니다.

정확히 짚으셨어요.  
**단순히 "0이 몇 개냐"가 중요한 게 아니라**,  
**"이 구조를 어떤 시각으로 이해하느냐"**가 더 중요합니다.  
그리고 이걸 다음 수업인 **"타입스크립트로 블록 구조 구현"**과 잘 연결해줘야,  
학생들이 **퍼즐 → 블록 구조**로 자연스럽게 이어서 사고하게 됩니다.

## 그래서 오늘의 핵심은?

### 단순히 0이 앞에 몇 개 나오느냐가 아니라,

> **"왜 그런 조건이 필요한가?"**  
> **"그 조건을 코드로 어떻게 판단하는가?"**  
> **"이 조건이 왜 블록 생성의 기준이 되는가?"**

이런 **‘철학적/구조적 시각’**을 얻는 게 **진짜 핵심**입니다.

## 오늘 수업은 무엇을 배웠나?

- **무작위 해시값** 중에서
- **특정 조건(난이도)을 만족하는 해시**를
- **계속 반복 계산하면서 찾는 구조**

즉, 누가 블록을 만들 수 있는지 판단하는 **"조건 기반 구조"**였어요.

## 결론: 관점 연결

| 오늘 배운 것                                  | 다음 수업에서 활용될 것                         |
| --------------------------------------------- | ----------------------------------------------- |
| nonce를 바꿔가며 해시값을 계산                | Block 클래스 안에 `nonce` 필드가 들어감         |
| hashToBinary()로 난이도 조건을 체크           | Block 생성 조건으로 난이도 만족 여부 검사       |
| 난이도 = 해시값이 앞에서부터 0이 N개일 것     | Block 생성 시 이 조건을 만족해야 생성 가능      |
| 퍼즐을 푸는 구조 = 노력의 증명(Proof of Work) | Block은 "내가 정말 채굴했는가?"를 증명하는 구조 |

> 오늘은 **퍼즐을 푸는 과정을 이해**했다면,  
> 다음 시간엔 그 퍼즐이 **어떻게 블록이라는 구조에 담기는지** 직접 만들게 될 거예요.
>
> 해시, 난이도, nonce는 단순한 데이터가 아니라  
> **"내가 이 블록을 정당하게 만들었다"는 증거**입니다.
