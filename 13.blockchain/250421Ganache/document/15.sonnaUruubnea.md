# **교수님, RPC가 너무 어려운데요...?**

그럴 수 있어요.  
왜냐하면 이걸 단순히

> “원격에서 함수 호출하는 기술이에요~”

라고만 외워버리면, **진짜로 감이 안 와요.**  
그래서 **납득을 해야 합니다.**

**“왜 등장했는지”, “왜 필요한지”**  
이걸 **네트워크 구조의 관점에서** 다시 바라봐야 정확하게 이해할 수 있어요.

---

## RPC를 네트워크 기반 시각에서 이해해봅시다

질문 하나 던져볼게요.

---

## ❓ **"내가 작성한 컨트랙트 코드를 다른 노드가 알 수 있을까요?"**

학생:

> “음… 당연히 알 수 있지 않나요?  
> 지금 이더리움 네트워크가 돌아가니까…  
> 배포하면 다 같이 공유되는 거 아닌가요?”

그렇게 생각하기 쉬워요.  
하지만 그건 절대 “당연한” 일이 아닙니다.

---

## **원래 HTTP나 P2P 통신은 페이지 또는 파일 요청 단위**예요.

- **파일 주소를 요청하면** → HTML, PDF, JSON 같은 파일이 옴
- **경로에 맞춰 리소스를 요청**하는 방식이지
- **함수를 호출한다**는 건 원래 없는 개념이에요

그래서 나온 개념이 **RPC (Remote Procedure Call)**  
→ 네트워크 구조 위에서 **함수를 요청하고, 실행시키고, 결과를 받아오는 방식**

---

## 1. 컴퓨터는 원래 ‘자기 함수’만 씁니다

```js
function getBalance() {
  return 100;
}
```

- 이 함수는 내 프로그램 안에서만 실행됨
- 다른 컴퓨터는 이 함수가 있는지조차 모름
- 당연히 실행할 수도 없음

---

## 2. 네트워크 시대: “저 서버 함수 좀 대신 실행해줘!”

- 사용자 정보가 저기 서버에 있음
- 파일 처리 기능은 다른 컴퓨터가 담당
- 이더리움의 스마트컨트랙트도 저기 Geth, 특정 네트워크에 있는 노드 안에 있음

그럼 어떻게 해야 할까요?

---

## 3. 그래서 나온 게 RPC

> **“네트워크로 연결된 다른 컴퓨터의 함수를, 마치 내 함수처럼 실행한다.”**

구조적으로 보면:

```
[내 프로그램]                  [상대 컴퓨터 (서버/노드)]
     ↓                                ↑
 [함수 호출 요청]  →→→→→→→→→→  [RPC 서버 대기 중]
                                 ↑
                         [EVM에서 함수 실행]
                                 ↓
     ←←←←←←←←←←←←←←←←←←  [실행 결과 응답(JSON)]
```

---

## 4. HTTP vs RPC의 본질적 차이

| 구분 | HTTP                   | RPC                        |
| ---- | ---------------------- | -------------------------- |
| 초점 | 리소스(URL, 파일) 요청 | 함수(절차) 호출            |
| 예   | `/user/1`              | `"eth_getBalance"`         |
| 사용 | 웹페이지, API 서버     | 블록체인 노드, 분산 시스템 |

---

## 5. 블록체인에서는 왜 꼭 RPC가 필요한가요?

이유는 단순해요.

> **스마트컨트랙트는 노드 안에 있는데,  
> 우리는 그걸 “밖”에서 조작하려고 하기 때문이에요.**

- 우리는 Web3.js에서 `contract.methods.increment().send()`를 치지만
- 실제로는 내부에서 이런 JSON 요청이 만들어져요:

```json
{
  "jsonrpc": "2.0",
  "method": "eth_sendTransaction",
  "params": [ { ... } ]
}
```

- 이걸 노드에게 보내면  
  → 노드는 내부 EVM에 전달하고  
  → EVM이 실행하고  
  → 결과를 응답해줘요

---

## RPC를 이렇게 보면 이해가 쉽습니다

> “RPC는 단순한 원격 호출이 아니라,  
> **네트워크로 연결된 컴퓨터의 기능을 '위임'하는 기술입니다.”**

## 요약: RPC를 바라보는 네트워크적 시각

| 관점                | 설명                                                      |
| ------------------- | --------------------------------------------------------- |
| 통신 구조           | 함수 호출을 네트워크 메시지로 변환해 주고받음             |
| 역할 분담           | Web3는 호출자, 노드는 RPC 서버                            |
| 블록체인에서의 위치 | 노드(EVM)에 트랜잭션/질의를 보낼 수 있는 유일한 통신 채널 |
