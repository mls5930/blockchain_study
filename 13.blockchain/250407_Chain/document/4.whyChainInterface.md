# 구현하기 전 잠깐! 이런 질문이 있을 수 있습니다.

## 체인에서도 추상화를 만들어요? 왜요?

오늘 체인이라는걸 체인이라는 걸 추상화를 정의하고 class로 만들거죠?  
알겠는데...

> “`block.previousHash = 이전 블록의 hash` 이거 이미 되어 있는데,  
> 굳이 `Chain`이라는 클래스를 또 만들어서 감싸야 하나요?”

좋은 질문입니다.  
실제로 많은 사람들이 처음에 이 구조를 보고 이렇게 생각합니다:

- 블록이 서로 연결되어 있으니까
- 그 연결 고리를 코드에 표현했으니까
- 그걸로 충분하지 않나?

하지만 실제로는 **"연결돼 있다"는 사실과 "신뢰할 수 있다"는 것은 완전히 다릅니다.**

---

### 단순 연결 vs 체인 구조의 진짜 역할

| 단순 연결된 블록들                           | 체인 클래스가 검증하는 구조                          |
| -------------------------------------------- | ---------------------------------------------------- |
| 그냥 next와 previousHash만 맞추면 OK         | 연결 상태가 **올바른 규칙에 따라 생성**되었는지 확인 |
| 중간에 끼워넣거나 조작해도 눈치 못 챔        | **유효성 검사**를 통과하지 않으면 추가 불가          |
| 연결만 되어 있으면 체인이라고 생각할 수 있음 | 체인은 **"시간 + 난이도 + 규칙"**을 모두 따름        |

---

### 블록은 ‘단위’, 체인은 ‘맥락’입니다

즉, 체인은 **맥락의 구조**로 이해하셔야 합니다.  
블록이 생성되고 다음 블록이 그냥 띡! 하고 생기는 게 아닙니다.  
단순히 나열하자면 이렇게 세 단계가 필요합니다:

1. 블록이 생성되고,
2. 다음 블록이 채굴되어 연결되고,
3. 그 과정에서 난이도가 조정됩니다.

**딱 봐도 뭔가 순서가 있죠.**

> “후훗… 단계가 있구만… 아주 일련적이야…  
> 뭐, 그냥 있어 보이라고 만든 거 아니겠어?”

**아닙니다.**

단계가 있다는 걸 인지하는 것도 중요하지만,  
**왜 그 단계들이 필요한지 고민해보는 것**이 더 중요합니다.

이런 전체 흐름은 **단일 블록 단위의 추상화만으로는 감당할 수 없습니다.**  
왜냐하면 **블록은 단지 하나의 거래 묶음을 담은 상자**일 뿐이니까요.

- **블록**: 단일 거래 모음의 "상자"
- **체인**: 그 상자들이 어떤 **순서**와 **규칙**에 따라 이어졌는지를 담은 "이력"

단순히 `block.previousHash` 값이 맞는다고 해서,  
그 연결이 정말로 **정당한 과정**을 거쳤는지,  
혹시 **중간에 끼워 넣은 위조 블록은 아닌지**는 알 수 없습니다.

=> 그래서 이 연결의 **정당성**을 검증하고,  
그 **전체 맥락을 유지**해주는 것이 바로 `Chain` 클래스의 역할입니다.

---

### 요약하자면:

> 우리는 단순히 블록을 쌓는 게 아니라,  
> **“왜 이 블록이 여기에 존재해야 하는가?”를 설명할 수 있는 맥락**을 만드는 것입니다.  
> 그 구조가 바로 체인입니다.

---

### 다시 말해…

> “`Block`이 데이터라면, `Chain`은 그 데이터가 쌓이는 **이력과 규칙**을 담은 구조입니다.”  
> 블록은 그냥 만들어질 수 있지만,  
> **체인은 "어떻게 쌓였는가"라는 신뢰의 맥락이 필수인 구조**입니다.

우리는 단순히 배열이나 연결 리스트를 만들려는 게 아닙니다.  
우리는 코드로 **신뢰가 축적되는 구조**를 만들어야 합니다.

그래서 `Chain`이라는 별도 클래스를 두고,  
그 안에 다음과 같은 **신뢰 검증 로직**을 구현하는 겁니다

- `addToChain` → 블록이 올바른 기준으로 연결되는가?
- `replaceChain` → 더 정당한 체인으로 교체되는가?
- `validateChain` → 전체 흐름이 조작 없이 이어졌는가?

이 구조를 통해 우리는 말로만 “신뢰가 있다”고 하는 게 아니라,  
**실제로 코드로 신뢰를 증명하는 블록체인을 만드는 것**입니다.
