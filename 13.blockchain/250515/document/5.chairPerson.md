# DAO.sol의 구조 변화 – “하나의 의견, 하나의 생태계”

컨트랙트 팩토리 코드가 좀 간단해보이죠? ㅎㅎ

그렇다면, 다시 어제 수업에서 DAO.sol에 대해서 얘기 좀 해봅시다.  
어제 수업에서 우리는 `DAO.sol`이라는 단일 컨트랙트를 통해 안건을 만들고, 투표하고, 결과를 확인하는 과정을 진행했습니다.  
그 과정 속에서 **의장(chairperson)**이라는 역할도 있었죠.

하지만 어제의 의장은 어떤 존재였나요?

- 컨트랙트를 배포한 사람
- 그래서 `createProposal()`을 호출할 수 있었던 사람
- 단순히 코드 상의 권한자

즉, **기술적인 한 줄** 이상의 의미는 부여되지 않았습니다.

## 그런데 다시 생각해 봅시다.

> **"의장이라는 사람은 정말 특별한 사람일까요?"**

아닙니다.

오늘부터의 관점은 다릅니다.  
**누군가 의견을 제시했다면, 그 사람이 바로 의장입니다.**

- 꼭 리더가 아니어도 됩니다.
- 회장도, 관리자도 아닙니다.
- **단지, 먼저 의견을 꺼낸 사람**입니다.

→ 그래서 오늘의 구조는 이렇게 설정됩니다:

> “**안건이 하나 생기면, 그것을 제시한 사람이 의장이 되고,
> 그 안건을 중심으로 뜻을 같이하는 사람들이 모여 생태계를 이루는 것**”

## 4-1. 의장의 의미가 확장됩니다

```solidity
constructor(address owner) {
    chairperson = owner;
    members[owner] = true;
    memberCount += 1;
}
```

이제 DAO 컨트랙트가 배포될 때마다,
→ 생성자 인자로 들어온 `msg.sender`가 자동으로 의장이 됩니다.

그리고 그 사람은 단지 **컨트랙트를 만든 사람**이 아니라,
→ **“의견을 제시한 사람”**, **“의사결정의 출발점”**,
→ 그리고 **“그 DAO 생태계를 시작한 사람”**입니다.

## 4-2. 생태계에는 멤버가 필요합니다

> 이제 누가 투표를 할 수 있을까요?

**모두가 투표할 수 있는 건 아닙니다.**
오늘 DAO 구조는 분명히 말합니다:

> **“참여는 자유가 아니라 책임이다.”**

그 책임을 나타내는 코드가 바로 아래입니다.

```solidity
uint private memberCount;
mapping(address => bool) private members;
```

이제 이 DAO는 단순한 공개 게시판이 아닙니다.
**의견을 제시한 사람이 의장이 되고, 그 뜻에 동의한 사람들만 멤버가 되어 참여할 수 있는 구조**입니다.

- `members`는 투표 자격을 가진 주소 목록입니다.
- `memberCount`는 몇 명이 등록되어 있는지를 추적합니다.
- `setMember(address)`라는 함수를 통해,
  → 의장이 직접 멤버를 승인해줍니다.

## 4-3. 멤버만이 투표할 수 있습니다

```solidity
modifier onlyMember {
    require(members[msg.sender], "no member");
    _;
}
```

이제 `vote()` 함수에는 이 modifier가 붙습니다.
→ 아무나 투표를 누를 수 없습니다.
→ 반드시 멤버로 승인된 주소만 투표가 가능합니다.

## 이것이 바로 오늘의 핵심 구조입니다

- **의장이 생기고**
- **멤버가 생기고**
- **의견을 중심으로 생태계가 구성됩니다**

DAO가 단순히 “투표하는 시스템”이 아니라,
**“하나의 의견을 기반으로 구성된 작은 거버넌스”**라는 사실을
오늘 구조를 통해 실감할 수 있을 것입니다.

---

다음 단계에서는, 이 멤버 기반 DAO가
**어떻게 실제로 투표를 받고, 종료하고, 결과를 판단하는지**
실행 흐름을 따라가 보겠습니다.
