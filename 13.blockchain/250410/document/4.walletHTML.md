## 12단계: 브라우저 화면 기준 지갑 시스템 전체 실행 흐름

### 목표

지금까지 구현한 지갑 시스템을 실제 브라우저에서 직접 사용해보자.

버튼을 누르면 지갑이 생성되고, 목록이 조회되며, 특정 지갑을 선택하면 상세 정보가 뜨는 **전체 실행 흐름**을 하나씩 따라가며 확인할 수 있어야 해.

## 실행 흐름 (브라우저 화면 기준)

### 1단계: 서버 실행부터 시작

먼저, 서버를 실행해야 웹 브라우저에서 API 요청이 가능하다.

```bash
ts-node src/core/wallet/server.ts
```

- 서버가 정상적으로 실행되면 다음 로그가 뜬다:

```bash
server open
```

- 이 서버는 **`http://localhost:4000`** 에서 웹페이지를 제공한다.

---

### 2단계: 웹 브라우저에서 페이지 접속

브라우저 주소창에 다음을 입력한다:

```
http://localhost:4000
```

접속하면 다음과 같은 화면을 볼 수 있다:

- **지갑 생성** 버튼
- **지갑 목록 조회** 버튼
- **지갑 정보 출력 영역** (account, privateKey, publicKey, balance)

---

### 3단계: 지갑 목록 조회 버튼 클릭

- **[지갑 목록 조회]** 버튼을 눌러보자.

#### 어떤 화면이 보이나요?

- 처음 실행했다면 `src/data/` 폴더에 저장된 지갑이 없기 때문에  
  아래에 **“조회 목록 없음”**이라는 문구가 나온다.

#### 중요

- 실제로 지갑 파일이 존재해야 목록이 나온다.
- 즉, `data/` 폴더에 아무 것도 없다면 지갑도 조회되지 않는다.

---

### 4단계: 지갑 생성 버튼 클릭

- **[지갑 생성]** 버튼을 눌러보자.

#### 어떤 일이 일어나나요?

- 새로운 지갑이 생성된다.
- 서버는 내부적으로 `Wallet` 객체를 만들고,  
  계정 주소(account)를 이름으로 한 파일을 `src/data/` 폴더에 저장한다.
- 브라우저 화면에 해당 지갑의 정보가 아래에 출력된다:

| 항목       | 내용 예시                                |
| ---------- | ---------------------------------------- |
| account    | `f7dbf2a98a...` (공개키에서 추출된 주소) |
| privateKey | `a9cf1272f8...` (랜덤하게 생성된 개인키) |
| publicKey  | `02bcefa7d1...` (압축된 공개키, 66자리)  |
| balance    | `0` (초기값)                             |

---

### 5단계: 다시 지갑 목록 조회 버튼 클릭

- 이제 다시 **[지갑 목록 조회]** 버튼을 눌러보자.

#### 어떤 변화가 있나요?

- 방금 생성한 지갑의 주소(account)가 **목록에 `<li>` 항목으로 표시**된다.
- 예시:
  ```html
  <li onclick="getWalletView('f7dbf2a98a...')">f7dbf2a98a...</li>
  ```

---

### 6단계: 목록에서 항목 하나 클릭

- 방금 나타난 지갑 주소 중 하나를 클릭해보자.

#### 어떤 일이 일어나나요?

- 서버에 해당 주소에 해당하는 비밀키를 요청 (`GET /walletSelect`)
- 서버는 그 비밀키로 `Wallet` 객체를 복원한 후 정보를 응답
- 브라우저 화면에 해당 지갑 정보가 다시 출력된다

> 이 과정은 지갑 복원 과정이자,  
> 하나의 **저장된 지갑을 선택해서 불러오는 흐름**이야.

---

## 전체 흐름 요약

| 순서 | 사용자 행동                        | 화면 반응 / 결과                             |
| ---- | ---------------------------------- | -------------------------------------------- |
| 1    | 서버 실행                          | `localhost:4000` 접속 가능                   |
| 2    | 브라우저에서 `localhost:4000` 접속 | 지갑 생성 및 조회 화면 표시                  |
| 3    | [지갑 목록 조회] 클릭              | 최초에는 “조회 목록 없음” 표시 가능          |
| 4    | [지갑 생성] 클릭                   | 지갑 생성됨 → 화면에 정보 출력 + 파일 저장됨 |
| 5    | 다시 [지갑 목록 조회] 클릭         | 방금 생성한 지갑 주소가 목록에 나타남        |
| 6    | 목록 중 하나 클릭                  | 해당 지갑 복원됨 → 상세 정보 다시 출력됨     |

---

## 무엇을 경험하는가?

이 흐름을 통해 다음을 경험하게 된다:

- 지갑이 어떤 과정을 거쳐 만들어지는지
- 서버가 어떤 역할을 하는지
- 데이터가 파일로 어떻게 저장되고 다시 불러와지는지
- 하나의 **사용자 중심 시스템 전체 흐름**을 직접 체험할 수 있다
