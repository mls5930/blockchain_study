# 필수 함수 6개 소개 – transfer / approve / transferFrom을 중심으로

자, 이제 우리는 "토큰도 결국 하나의 컨트랙트"라는 사실을 알게 되었고,
그 컨트랙트가 어떤 규칙(ERC-20)을 따를 때,
**토큰처럼 작동한다**는 것도 배웠습니다.

---

그럼 여기서 질문 하나 해볼까요?

> “우리가 만든 토큰을 다른 사람에게 보낼 수 있으려면
> 컨트랙트 안에 무엇이 존재해야 할까요?”

---

## 우리는 이제 토큰을 만들 겁니다.

그리고 상태로 보관할 겁니다.

```solidity
mapping(address => uint256) balances;
```

이렇게 주소별로 숫자(=잔액)를 저장하겠죠.

그런데 여기서 문제가 하나 생깁니다.

> "어떻게 다른 주소로 이 값을 이동시킬 것인가?"

---

## 자, 한국어로 표현해봅시다.

> “나는 지금 내 지갑에 1000메소가 있어.
> 이걸 혜성 학생한테 보내고 싶어.”

너무 간단하죠?

그런데 이걸 **스마트 컨트랙트 안에서** 실행하려면?

### 바로 이때 필요한 게 `transfer()` 함수입니다.

---

## 1. transfer — 내가 내 걸 보내기

```solidity
function transfer(address to, uint256 amount) public returns (bool)
```

- 이건 **내 지갑에서 → 상대 지갑으로** 보내는 구조입니다.
- 조건: **보내는 사람이 직접 실행해야 합니다.**

쉽게 말해,

> “내가 지금 직접 이걸 실행해서 보낼게요!”

이겁니다.

---

## 그런데, 진짜 세상은 그렇게 단순하지 않죠.

> “내가 지금 직접 보내는 게 아니라,
> 저 애한테 보내라고 **권한을 미리 위임**할 수는 없을까?”

---

## 2. approve — 권한 위임

```solidity
function approve(address spender, uint256 amount) public returns (bool)
```

이 함수는 **“이 주소(spender)에게 내가 가진 토큰 중 일부를 사용할 수 있도록 허락할게요”**라는 뜻입니다.

즉,

> “내가 직접 보내는 건 아니지만,
> 네가 대신 사용할 수 있도록 **권한은 줄게**.”

---

## 그리고 그 권한을 사용해서 대신 보내주는 함수가 있습니다.

## 3. transferFrom — 대신 보내기

```solidity
function transferFrom(address from, address to, uint256 amount) public returns (bool)
```

- `approve()`를 통해 **미리 권한을 부여**받은 주소가
- `from` 주소에서 `to` 주소로 토큰을 이동시킵니다.

예를 들면 이런 거죠:

> “나는 김태정이고, 고혜성에게 1000개 토큰을 보낼 권한을 줬어요.
> 그러면 혜성은 `transferFrom(태정, 혜성, 1000)`을 실행해서
> **대신 가져갈 수** 있어요.”

---

## 다시 정리합니다.

| 함수           | 개념                            | 예시                                                               |
| -------------- | ------------------------------- | ------------------------------------------------------------------ |
| `transfer`     | 내가 직접 보내는 함수           | “내가 이걸 지금 실행해서 너한테 줄게.”                             |
| `approve`      | 권한을 미리 설정하는 함수       | “이만큼은 네가 대신 써도 돼.”                                      |
| `transferFrom` | 위임받은 권한을 사용해서 보내기 | “아, 권한 있으니까 실행해서 가져가야지.” (권한 없이 실행하면 실패) |

---

## 핵심은 "이동 = 권한 + 실행"이다

우리는 무심코 "보낸다"고 생각하지만,
스마트 컨트랙트는 아주 명확하게 처리합니다.

1. **당사자가 직접 보내면** → `transfer()`
2. **누군가에게 미리 권한을 주면** → `approve()`
3. **그 권한을 갖고 대신 보내면** → `transferFrom()`

---

## 이렇게 해서 등장한 기본 3함수 외에도,

ERC-20은 나머지 3개의 필수 함수도 정의해두고 있습니다.

### +3 필수 함수 (조회용)

| 함수            | 설명                                   |
| --------------- | -------------------------------------- |
| `balanceOf()`   | 특정 주소가 보유한 토큰 수량           |
| `totalSupply()` | 발행된 전체 토큰 수                    |
| `allowance()`   | approve로 위임된 토큰 잔여 수량 확인용 |

---

## 결론: 토큰은 숫자고, 숫자는 권한이 있어야 움직인다

ERC-20 토큰의 진짜 구조는 간단합니다.

- 내 지갑에 있는 숫자 → 상태
- 이 숫자를 다른 데로 보낸다 → 행동
- 그런데 행동은 권한이 필요하다 → approve
- 권한 있으면 대신 실행한다 → transferFrom

---

이 흐름만 이해하면
**모든 ERC-20 토큰의 핵심은 다 파악한 셈입니다.**

이제 다음 수업에서는
이 흐름을 실제 코드로 직접 구현해보고,
UI에서 어떻게 이 함수들을 호출하는지도 실습으로 확인해볼 겁니다.
