## 저번 시간에는 뭐했을까?

> **“그래서… 너 얼마 남았는데?”**

---

우리는 지난 시간,  
트랜잭션이 블록에 포함되었다고 가정하고,  
그 결과 **잔액 상태가 실제로 어떻게 바뀌는지**를 코드로 구현했습니다.

“누가 얼마를 보냈다”는 행위는 단지 트랜잭션 1개만으로 끝나지 않습니다.  
이 트랜잭션이 **블록에 반영**되어야,  
비로소 **이전 잔액은 제거되고 → 새로운 잔액이 등록**되죠.

---

## 저번 시간의 목차 요약

1. `Unspent.create()`  
   → TxOut을 기반으로 새로운 UTXO 등록

2. `Unspent.delate()`  
   → TxIn을 기반으로 기존 UTXO 제거

3. `Unspent.update()`  
   → 위 동작을 하나의 트랜잭션 기준으로 통합 처리

4. `getAmount()`, `isAmount()`  
   → 내가 가진 잔액의 합을 계산하거나, 보낼 수 있는지 검증

5. TDD 기반으로  
   → **Bob이 Alice에게 7코인을 보내는 흐름 전체 실습**

---

## 저번 시간의 핵심

- **“트랜잭션은 블록에 포함되어야 진짜 반영된다.”**
- **UTXO는 반드시 '제거와 생성'이 짝지어져야 한다.**
- 우리는 단순한 배열 조작이 아니라,  
  **"신뢰 가능한 잔액 상태를 시스템적으로 유지하는 방법"**을 배우고 있었다.

---

## 그런데 말입니다...

> 이 블록을 만든 사람,  
> **그 사람은 대체 어떤 보상을 받아야 할까?**

> 누가 그 사람한테 코인을 보내주는 걸까?

---

## 이번 시간에는 뭐할까?

오늘의 주제는 바로  
**“코인베이스 트랜잭션(Coinbase Transaction)”**입니다.

블록체인은 이렇게 약속해요:

> **“누구든 블록을 유효하게 만들면,  
> 그 블록 안에 자신에게 보상을 주는 트랜잭션을 넣어도 좋아!”**

바로 이 트랜잭션이 `코인베이스`예요.

## 오늘 수업의 핵심 질문

- **보상은 누가 주는가?**
- **그 보상은 시스템적으로 어떻게 표현되는가?**
- **TxIn 없이 TxOut만 있는 트랜잭션은 어떻게 가능한가?**
- **우리가 만든 트랜잭션 구조에서 코인베이스는 어떻게 특별한가?**

## 오늘 수업의 목차

1. **코인베이스 트랜잭션이 왜 필요한가?**  
   → 블록 보상의 원리와 시스템적 역할

2. **TxIn 없이 TxOut만 있는 구조 만들기**  
   → `createCoinbase(account, height)` 메서드 구현

3. **코인베이스 + 일반 트랜잭션 → 블록 트랜잭션 구성**  
   → `txsForBlock = [coinbaseTx, ...getPool()]` 구조 확인

4. **트랜잭션 풀 동기화 및 UTXO 반영**  
   → `sync()`, `update()`로 블록 반영 시뮬레이션

5. **TDD: “Bob이 Alice에게 7코인을 보내는 거래 + 보상받는 채굴자” 시나리오 구현**

## 이번 수업의 목적

이제 우리는  
**"트랜잭션은 누가 만들고, 누가 검증하고, 누가 보상받는가"**까지 다룰 수 있어야 합니다.

오늘 이 흐름이 완성되어야  
다음 시간에 배울 **P2P 구조**가  
**"왜 필요한가"**를 자연스럽게 이해할 수 있습니다.

## 다음 시간 예고

> 지금 만든 트랜잭션,  
> **이제는 나 혼자 알고 있으면 안 돼요.**  
> **다른 노드들에게 알려야 하거든요.**

그래서 다음 시간에는  
**P2P 네트워크 구조**에 대해 다룹니다.  
트랜잭션을 전파하고, 블록을 공유하는  
**분산 시스템의 핵심 구조를 구현**하게 될 거예요.
