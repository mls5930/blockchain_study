# **유정님 프로젝트 중간 점검 피드백**

## 1. 컨트랙트 구성

| 컨트랙트       | 역할               |
| -------------- | ------------------ |
| `BadgeNFT.sol` | 등급 NFT           |
| `STKToken.sol` | 보상 ERC-20        |
| `UserCRUD.sol` | 게시판 + 보상 처리 |

→ **기능별 책임 분리가 잘 되어 있음. 명명 규칙(UserCRUD)은 다소 혼동될 수 있으니 `Board` 등 도메인 중심 네이밍을 고려해도 좋음**

## 2. 배포 순서

1. `STKToken.sol`
2. `BadgeNFT.sol`
3. `UserCRUD.sol` – 두 개의 주소를 받아 배포 시 주입

→ **표준적인 순서대로 잘 배포되어 있음**

## 3. 현재 구현된 기능

| 기능 항목              | 상태         |
| ---------------------- | ------------ |
| 글 작성 기능           | 구현 완료 ✅ |
| 0.5 ETH 결제           | 구현 완료 ✅ |
| STK 보상 지급          | 구현 완료 ✅ |
| 등급 조건 계산 및 판별 | 구현 완료 ✅ |
| 조건 만족 시 NFT 발급  | 구현 완료 ✅ |

→ **기능 구현은 안정적이고, 핵심 로직이 잘 연결되어 있음**

## 4. 다음 계획

- **화면 UI 구현 예정**
- Metamask 연동과 트랜잭션 처리에 중점을 둘 것으로 예상됨

---

## 5. 교강사 질의 및 핵심 피드백

### `firstRewardSTK()` 함수에 대한 질문:

```solidity
function firstRewardSTK() external {
    require(!firstCompensated[msg.sender], "already paid");
    stkToken.transfer(msg.sender, 1 * 10 ** 18);
    firstCompensated[msg.sender] = true;

    emit FirstCompensated(msg.sender);
}
```

**교강사 질문**:
"언제 호출합니까? 왜 만들었습니까?"

**학생 응답 요지**:

- ‘처음 지갑 연결할 때 실행’
- ‘일반회원 1STK 보상을 이렇게 설계한 것’
- ‘사실상 쿠폰 같은 의미’

---

## 6. 피드백 요점 정리

### 1. Web3에서는 ‘자동 지급’이 존재하지 않음

- ‘접속 시 자동 지급’ 같은 개념은 **브라우저 기반 UX일 뿐**, **블록체인에서는 모든 보상은 명확한 트리거(사인)가 있어야 함**
- 일반적으로는 **버튼 클릭 → 트랜잭션 서명 → 토큰 전송**

**⟶ 지금의 구조는 UX 레벨의 착각을 스마트 컨트랙트에 그대로 반영한 형태임**

---

### 2. 구조적/시멘틱 차이 이해 필요

| 일반 보상 설계 | 현 구조 (`firstRewardSTK`) |
| -------------- | -------------------------- |
| 글 작성 → 보상 | 로그인 → 자동 지급         |
| 사용 행위 기반 | 상태 기반 지급             |
| 명시적 목적    | 추상적 용도                |

**⟶ 실 사용 흐름이 아니라 설계자의 가정이 흐름을 이끌고 있음.**
**⟶ 실전에서는 이 구조를 회사에 제안하거나 질문 형식으로 공유했어야 함**

---

### 3. `transferFrom()` 실패에 대한 원인 분석

- 직접 `transfer()`로 변경하여 해결했지만,
  이는 **문제의 회피일 뿐, 근본 해결은 아님**

**가능성**:

- `approve()`를 명확히 호출하지 않았거나
- `UserCRUD` 컨트랙트에 대한 allowance가 설정되지 않음

**정리**:

- `transferFrom()`이 실패할 땐 항상 다음을 점검:

  1. `approve` 제대로 호출되었는가
  2. `spender`가 정확히 설정되었는가
  3. `allowance` 값이 충분한가

## 총평

- **기술 구현 완성도**: 높음
- **Web3 실전 구조 이해도**: 아직 개선 여지 있음
- **철학적 판단력**: 성실하나, 실전 경험에 기반한 설계 전환이 필요함

## 마무리 조언

- 지금의 설계는 **“기획자의 상상”**을 컨트랙트로 옮긴 느낌이 강함
- Web3에서는 **사용자 서명 없는 행위는 없다**
- **기업 협업에서 필요한 역량은 ‘코드’가 아니라 ‘구조에 대한 질문력’**

> 다음 단계에서는 **버튼 트리거에 따른 트랜잭션 흐름**,
> 그리고 **조건 만족 시 NFT와 보상이 동시에 수행되는 실제 흐름을 UI에 반영하는 것**이 핵심입니다.
