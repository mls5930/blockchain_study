## 3. 스마트 컨트랙트 코드 변경 흐름

자, 이제 우리가 `enum`을 선언했으니  
그 값을 실제로 코드에서 **"언제, 어떤 조건에서"** 설정하는지도 알아야겠죠?

> 즉, **게임의 상태를 코드로 표현할 수 있게 되었으니,  
> 이제는 그 상태를 "어디서 바꿔야 하는가"를 정리해야 합니다.**

---

### 가장 먼저 할 일은?

`enum`만 선언해놓고 값을 설정하지 않으면  
기본값은 0 (`GameState.playing`)으로 자동 지정되긴 합니다.  
하지만 우리는 그걸 **명확하게 의도를 드러내는 코드로 써야** 합니다.

그래서 이렇게 씁니다:

```solidity
constructor(address _owner) {
    ...
    gameState = GameState.playing;
}
```

- **게임이 시작되었음을 명시적으로 설정**해주는 구간입니다.
- 이건 단순한 선언이 아니라,  
  **"게임은 지금부터 시작이다"**라는 신호입니다.

---

### 다음은, 게임이 끝났을 때입니다

우리는 `gameStart()` 함수 안에서  
정답을 맞췄을 경우 **게임이 종료되는 조건**을 처리하죠.

그래서 여기에 이 코드를 추가합니다:

```solidity
if (_value == random) {
    ...
    gameState = GameState.gameOver;
}
```

> 정답을 맞추는 순간,  
> 게임은 더 이상 진행될 수 없고,  
> 상태는 `gameOver`로 전환됩니다.

이건 매우 중요한 신호입니다.  
왜냐하면 이 값을 기준으로 프론트엔드 화면에서는  
**게임이 끝났는지 아닌지를 구분해서 메시지를 띄우거나,  
게임을 막거나, 다음 동작을 제어할 수 있기 때문**입니다.

---

## 흐름을 다시 정리해봅시다

| 시점      | 코드 위치            | 설정되는 상태        | 의미                          |
| --------- | -------------------- | -------------------- | ----------------------------- |
| 배포 시점 | `constructor()` 내부 | `GameState.playing`  | 게임은 이제 시작 상태입니다   |
| 정답 맞춤 | `gameStart()` 내부   | `GameState.gameOver` | 게임은 종료 상태로 진입합니다 |

---

## 그래서, 이게 왜 중요하냐면요?

우리는 **상태 기반 서비스**를 만드는 중입니다.  
사용자가 어떤 버튼을 눌렀을 때,  
지금 상태가 `playing`인지, `gameOver`인지에 따라  
**동작이 달라져야 하기 때문입니다.**

그 기준값을 코드에서 명확하게 "구간별로" 설정해주는 것이  
바로 `enum`을 "쓰는 이유"이자  
그 값을 "구간별로 변경하는 이유"입니다.

---

다음 단계에서는,  
이렇게 설정된 상태값을 **화면에서 어떻게 보여줄지**,  
즉 **프론트엔드 연결 흐름(index.html)**을 이어서 다루게 됩니다.
