## 6. 최대 시도수 `GAME_COUNT`의 의미

자, 지금까지 흐름을 다시 정리해볼게요.

우리는

- 정답을 설정했고,
- 사용자가 입력하면
- 그 값을 비교하고,
- 정답이면 보상하고,
- 아니면 보상금을 쌓는 구조를 만들었습니다.

그런데 질문 하나 드려볼게요:

> “게임이 끝나는 시점은 언제인가요?”

---

### 하나의 기준이 필요합니다.

게임이란 건 **시작만 있으면 안 됩니다.**  
**끝이 있어야 진짜 게임이죠.**

물론 정답을 맞추면 끝날 수 있습니다.  
하지만 만약 아무도 정답을 못 맞춘다면?

- 무한히 계속해도 될까요?
- 계속 입장료를 낼까요?

→ **게임의 무한 반복은 시스템 안정성을 해치게 됩니다.**

---

그래서 우리는 이런 **명확한 기준**을 세우기로 했습니다:

> **“기회는 10번만 드립니다.”**  
> **딱 10판만 시도할 수 있고, 그 안에 못 맞추면 게임은 자동 종료됩니다.**

---

### 바로 그 기준값이 `GAME_COUNT`입니다.

```solidity
uint256 private constant GAME_COUNT = 10;
```

- `constant`로 선언되어 있기 때문에 **누구도 수정할 수 없습니다.**
- 이 값은 **게임의 생명 주기**를 결정짓는 기준입니다.

---

## 그럼 이 값은 어디에 쓰일까요?

`gameStart()` 함수에서  
**게임이 더 이상 진행되지 않도록 막기 위한 조건으로 사용됩니다.**

```solidity
require(progress < GAME_COUNT, "GameOver");
```

이 한 줄의 코드는 이런 뜻입니다:

> “이미 10번 시도했다면, 더 이상 게임을 시작할 수 없습니다.”  
> → 즉, 게임은 종료입니다.

---

## 흐름을 연결해보면

- 사용자가 숫자를 입력하고
- `gameStart()`를 실행할 때마다
- 내부적으로 `progress += 1`로 횟수를 누적합니다
- 이때, `progress < GAME_COUNT`라는 조건을 검사하여
  - 아직 남은 기회가 있으면 → 진행
  - 10회가 다 찼으면 → 게임 종료

---

## 그렇다면 화면에서는?

`getPlaying()` 함수에서 이 값을 함께 체크합니다:

```solidity
function getPlaying() public view returns (uint256) {
    uint256 Playing = 0;
    if ((gameState != GameState.playing) || (progress == GAME_COUNT)) {
        Playing = 1;
    }
    return Playing;
}
```

즉,

- `progress == GAME_COUNT`가 되면  
  자동으로 `"게임종료"` 상태로 표시됩니다.

---

## 왜 `constant`로 선언할까요?

- 이 값은 **변하면 안 되는 기준값**입니다.
- 게임의 룰이 사용자마다 바뀌면 공정하지 않겠죠.
- `constant`로 선언하면 → 가스 비용도 줄어듭니다.

---

## 정리

| 항목                | 설명                                                    |
| ------------------- | ------------------------------------------------------- |
| `GAME_COUNT`        | 최대 시도 횟수 (10판)                                   |
| `progress`          | 현재까지 시도한 횟수                                    |
| `progress < COUNT`  | 게임이 아직 가능한 상태                                 |
| `progress == COUNT` | 더 이상 진행 불가, 게임은 종료됨                        |
| `constant`          | 이 값은 절대 불변, 변경 불가                            |
| 사용처              | `require()`, `getPlaying()`, 화면 메시지 분기 등에 활용 |

---

> 이제 우리는 **“언제까지 게임을 할 수 있느냐”**라는 질문에 대해  
> 코드로 정확하게 답할 수 있게 되었습니다.
>
> 바로, 이 `GAME_COUNT`가 그 기준입니다.

다음은 이 값을 실제 분기로 사용하는 로직,  
즉 `require(progress < GAME_COUNT)`가 **게임 흐름에서 어떻게 분기점을 만들어주는지** 살펴보죠.
