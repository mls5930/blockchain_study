# `index.ts` – 프로그램의 진짜 시작점 (Entry Point)

## 이 파일은 어떤 역할을 하나요?

한 줄로 요약하면:

> **프로그램을 실행했을 때 가장 먼저 읽히는, "진입점"이 되는 파일이에요.**

```ts
import { startNode } from "./startNode";
startNode(process.env.NODE_ID);
```

이건 우리가 작성한 **전체 노드 시스템의 실행을 시작하는 명령어**예요.  
즉, 이 한 줄로 다음을 실행하는 거예요:

- 체인 준비
- 소켓 서버 열기
- HTTP 서버 열기
- 상대 노드와 연결

---

## 근데 이런 질문 나올 수 있어요

> “그냥 이 안에 `startNode()` 함수 코드도 같이 쓰면 안 되나요?”

결론부터 말하면:

> **가능은 하지만 절대 그렇게 하면 안 됩니다.**

왜냐하면…  
이 질문은 결국 이런 **백엔드 개념들을 아직 잘 모른다는 표시**거든요:

---

## 여기서 배워야 할 백엔드 지식

### 1. **엔트리 파일은 ‘실행’만 하고, 구현은 ‘분리’해야 한다**

> `index.ts`는 **"프로그램을 어떻게 실행할지"**를 보여주는 곳이고,  
> 실제 로직은 `node.ts`에 따로 분리해 두는 게 원칙이에요.

**왜냐하면?**

- 실행은 딱 한 줄만 있으면 깔끔하고
- 실제 동작 로직은 재사용하거나 테스트할 수 있게 따로 나눠두는 게 유지보수에 유리하니까요

---

### 2. `NODE_ID`를 외부에서 주입하는 이유도 있어요

```ts
startNode(process.env.NODE_ID);
```

이걸 보면 또 이렇게 말할 수 있죠:

> “아니 그냥 node1이라고 박아놓으면 안 되나요?”

근데 이건 **환경에 따라 실행 옵션을 바꾸기 위해 꼭 필요한 방식**이에요.  
즉, 하나의 코드를 가지고도:

```bash
NODE_ID=node1 ts-node src/core/index.ts
NODE_ID=node2 ts-node src/core/index.ts
```

→ 실행 환경만 다르게 주면  
→ 두 개의 노드를 동시에 실행할 수 있게 해주는 유연함이에요.

---

## 정리하면

| 질문                                            | 해설                                                                     |
| ----------------------------------------------- | ------------------------------------------------------------------------ |
| 그냥 여기서 `startNode()` 내용 다 쓰면 안 돼요? | ❌ 실행과 로직은 분리하는 게 유지보수, 테스트, 확장성 측면에서 훨씬 유리 |
| 왜 NODE_ID를 외부에서 받나요?                   | ✅ 환경마다 포트를 다르게 설정해서 여러 노드를 동시에 실행하기 위해      |
| 왜 `index.ts`가 중요한가요?                     | ✅ 여기가 전체 블록체인 프로그램의 **진짜 시작점**이기 때문입니다.       |

---

## 한 문장 요약

> `index.ts`는 "실행만 담당하는 진입점"이고,  
> 실제 로직은 `node.ts`에서 분리 관리함으로써  
> **깔끔하고 확장 가능한 구조를 만드는 출발점**이에요.
