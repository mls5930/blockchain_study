## 시나리오 정리: 밥이 앨리스에게 7코인을 보낸다

> 밥은 자신의 지갑에서 **서명을 통해 트랜잭션을 생성**하고,  
> **자신이 가진 동전들(UTXO)** 중에서 **7코인 이상을 선택**해 앨리스에게 전달한다.  
> 꺼낸 금액이 7보다 많다면, **남은 잔액(거스름돈)은 다시 자신의 지갑으로 되돌아간다.**  
> 트랜잭션은 해시 처리되어 고유하게 식별되며, **트랜잭션 풀에 등록된 후**  
> 이후 블록 생성에 사용될 준비를 마친다.

---

## 무엇을 검증해야 하는가 (시나리오 기반 TDD 항목)

| 번호 | 검증 항목                                                            | 설명               |
| ---- | -------------------------------------------------------------------- | ------------------ |
| 1    | 밥은 개인키/공개키 키쌍을 생성할 수 있어야 한다                      | 지갑 생성 완료     |
| 2    | 밥의 개인키로 서명을 만들 수 있어야 한다                             | SHA256 + sign 확인 |
| 3    | 밥은 7코인 이상 잔액(UTXO)을 보유하고 있어야 한다                    | 최소 조건 충족     |
| 4    | `createInput()` 호출 시 필요한 만큼의 UTXO를 선택해야 한다           | 누적값이 7 이상    |
| 5    | 선택된 TxIn의 총액이 실제 꺼낸 금액과 일치해야 한다                  | usedAmount 검증    |
| 6    | `createOutInput()` 호출 시 앨리스에게 정확히 7코인이 전송되어야 한다 | 수신자 검증        |
| 7    | 꺼낸 총액이 7보다 크면, 밥에게 거스름돈 TxOut이 생성되어야 한다      | 잔액 TxOut 확인    |
| 8    | 꺼낸 총액이 정확히 7이면, 밥에게 거스름돈 TxOut은 없어야 한다        | 분기 조건 검증     |
| 9    | 입력(TxIn) + 출력(TxOut)을 직렬화해 해시값을 생성할 수 있어야 한다   | serializeRow 확인  |
| 10   | 최종 트랜잭션은 트랜잭션 풀에 정상 등록되어야 한다                   | 풀 길이 증가       |

---

## 추가 설명 (7번 & 8번 중요 테스트)

- **거스름돈이 생기는 상황**

  - 꺼낸 총액이 10 → 전송 7 → 잔액 3
  - TxOut에는 `Alice: 7`, `Bob: 3` 이 존재해야 함

- ❌ **거스름돈이 생기지 않는 상황**
  - 꺼낸 총액이 7 → 전송 7 → 잔액 0
  - TxOut에는 `Alice: 7` 하나만 존재해야 함
