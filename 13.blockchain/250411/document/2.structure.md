# 모든 거래? 거래의 확장된 의미

그렇다면 이 ‘주장’이 블록체인에 올라가기 위해선 어떤 조건이 필요할까요?

1. **누가 이 말을 했는지**를 확인할 수 있어야 하고,
2. **그 말이 어떤 근거에서 나왔는지**를 추적할 수 있어야 하며,
3. **새롭게 남길 정보는 무엇인지**를 명확히 해야 합니다.

우리는 개발자이기에,  
이러한 주장과 증명의 과정을 **구조화된 형태로 표현해야** 합니다.  
그래서 코드에서는 다음과 같은 구성 요소들이 필요해지는 것이죠.

## 그렇다면, 트랜잭션은 어떻게 구성될까요?

앞서 이야기했듯, 트랜잭션은 단순한 돈 거래가 아닌  
**"내가 어떤 주장을 한다"**는 것을 **기록하고 증명**하는 구조입니다.

그렇다면 개발자인 우리는,  
이 주장을 **코드로 어떻게 표현할 수 있을까요?**

---

트랜잭션 하나는 기본적으로 다음과 같은 3가지 주요 구성 요소를 가집니다

### 1. **이것을 가지고 있었다**

어떤 주장을 하기 위해선,  
**그 주장의 근거가 되는 ‘이전의 기록’이 있어야** 합니다.

예를 들어,

> **“나 지금 10비트코인 쓸 수 있음!”**  
> 이 말을 진지하게 받아들이기 위해선,  
> 우리는 이렇게 물을 겁니다:  
> “그 말의 **근거**는 뭐죠?”

블록체인에서도 마찬가지입니다.  
**“내가 이 돈(혹은 정보)을 사용할 수 있다”고 주장하려면**,  
**과거에 나에게 그게 주어졌다는 기록**이 반드시 필요합니다.

이걸 코드로 표현한 것이 바로 `입력값(Input)`입니다.  
→ 과거 트랜잭션 중, 내가 받은 내역을 참조합니다.  
→ “이건 예전에 받았던 기록이고,  
지금 이 트랜잭션에서 그걸 사용하겠다는 의미야”라는 뜻입니다.

> 💡 참고로, 우리가 흔히 말하는 '잔액'처럼 보일 수도 있지만  
> 비트코인에서는 계좌처럼 단순히 숫자가 저장되어 있는 게 아닙니다.  
> **지금까지의 거래 내역들을 추적해서, 아직 사용되지 않은 부분들을 계산해내는 방식**입니다.  
> (이 구조를 우리는 나중에 **UTXO**라고 부를 거예요!)

---

### 2. **이것을 누구에게 전달하겠다**

트랜잭션은 단순히  
**“과거에 받은 걸 내가 갖고 있어요”**로 끝나지 않습니다.  
그걸 지금 **어떤 목적이나 의도를 가지고, 누구에게 전달하겠다**는 행위까지 포함합니다.

예를 들어,

> **“이 중 3비트코인은 친구한테 주고, 7비트코인은 다시 나한테 돌려줘.”**

이건 단순한 메시지가 아니라,  
**어떤 자산을 어떤 조건으로 분배할지**에 대한 명확한 선언입니다.

블록체인에서는 이런 의도를 `출력값(Output)`이라는 형태로 표현합니다.  
→ 여기에는 **받는 대상(주소)**과 **금액**,  
→ 그리고 때로는 **어떤 조건이 있을지**까지 포함됩니다.

즉, 트랜잭션의 출력은  
**“내가 가진 것 중 일부를 이렇게 나누고 싶습니다”**를 기술한 구조입니다.

> 💡 참고로, 여기서 말하는 "받는 대상"은  
> 단순한 이름이 아니라, **공개키 기반으로 생성된 주소**입니다.  
> 즉, 어떤 공개키를 가진 사람에게 이걸 넘기겠다는 의미죠.
>
> **출력값(Output)은 새로운 권한을 부여하는 설계도**와 같습니다.

---

### 3. **이것은 나다!**

자,  
“과거의 기록을 사용해서”,  
“누군가에게 어떤 방식으로 전달하겠다”는 계획을 세웠다면,  
마지막으로 꼭 필요한 게 있습니다.

바로, **“이건 내가 한 말입니다”라는 증거**입니다.

예를 들어,

> **“이 10비트코인 중 3은 친구한테, 나머지는 나한테.”**  
> 라고 누군가 말한다면, 우리는 이렇게 물을 수밖에 없습니다:
>
> “그 말을 한 사람이 **진짜 그 권한을 가진 사람** 맞아?”

이걸 블록체인에서는 **서명(Signature)**과 **공개키(Public Key)**로 해결합니다.

- 서명은 **그 사람이 실제로 해당 트랜잭션을 만들었다는 증거**이고,
- 공개키는 **그 서명이 유효한지를 누구나 검증할 수 있게 해주는 열쇠**입니다.

즉,

> **"내가 이 내용을 만들었고, 여기에 책임을 집니다"**  
> 라는 걸 서명을 통해 증명하는 겁니다.

그리고 그 서명이 진짜인지를 확인하기 위해  
블록체인은 트랜잭션 안에 담긴 **공개키**를 사용합니다.

> 💡 정리하면,  
> **공개키(Public Key)는 나를 설명하는 디지털 신분증**,  
> **서명(Signature)은 그 신분증을 가진 사람이 직접 찍은 도장**이라고 생각하면 됩니다.

---

이렇게 보면 트랜잭션이란 건 단순한 데이터 뭉치가 아니라,  
**“내가 어떤 이전 내용을 바탕으로, 어떤 새로운 상태를 만들고, 그걸 내가 직접 증명하는 구조”**입니다.

> 결국, 트랜잭션 = **기록의 계승 + 새로운 상태 제안 + 주체의 책임**
