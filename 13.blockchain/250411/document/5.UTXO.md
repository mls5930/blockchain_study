## 인터페이스를 작성하기 전에 잠깐!

### 우리가 트랜잭션 구조를 살펴보며 놓치고 있는 것은?

앞서 우리는 트랜잭션을 구성하는 중요한 요소들을 확인했습니다.

- `TxIn`: 과거의 어떤 트랜잭션을 참조한다
- `signature`: 내가 그 기록의 주인임을 증명한다
- `TxOut`: 누구에게 얼마를 보낼지 정의한다

그런데 말입니다...

---

## ❓ 그런데... `TxIn`에는 “금액”이 없습니다.

다시 한번 `TxIn`을 살펴보면:

```ts
export class TxIn {
  txOutId?: string; // 과거 트랜잭션의 ID
  txOutIndex: number; // 해당 트랜잭션의 출력 인덱스
  signature: SignatureInput; // 내가 그 기록의 주인이라는 증거
}
```

분명히 과거의 기록을 참조하고 있고, 그 주인이 나라는 것을 증명하고는 있는데,  
**“얼마를 참조하고 있는지”**에 대한 정보는 없습니다.

---

## 의문: “그럼 이 입력이 얼마짜리인지 어떻게 알 수 있을까?”

답은 하나입니다.

> 과거의 `TxOut`을 다시 **조회**해야 합니다.

왜냐하면 `TxIn`은 그저 "이전에 있었던 무언가를 사용할 거야"라고 **참조만** 하고 있기 때문이죠.  
그 **실제 금액은 참조하고 있는 과거의 트랜잭션 출력(TxOut)** 안에 들어 있습니다.

즉,

- 지금 이 입력이 얼마짜리인지 알고 싶으면
- **그 트랜잭션의 ID(`txOutId`)와 출력 인덱스(`txOutIndex`)**를 이용해서
- 과거 트랜잭션의 출력값(`TxOut`)을 찾아가야 합니다

---

## 그리고 이렇게 “과거 TxOut 중 아직 사용되지 않은 것”들을 우리는 UTXO라고 부릅니다.

UTXO = **Unspent Transaction Output**, 즉 **아직 쓰이지 않은 트랜잭션 출력**

한 줄로 요약하면:

> **"내가 이전에 받은 것 중, 아직 아무에게도 안 준 것"**

---

## 여기서 중요한 개념 흐름

- 우리는 잔액을 숫자처럼 들고 있는 것이 아닙니다 (계좌처럼 `balance = 100`이 아님)
- 우리는 **내가 받은 여러 조각(UTXO)**을 들고 있고,
- 트랜잭션을 만들 때는 **그 조각들을 꺼내서 하나하나 사용**합니다
- → `TxIn`은 그 조각들을 참조만 할 뿐
- → 실제 금액 정보는 과거의 `TxOut` 안에만 존재
- → 따라서 잔액을 계산하려면, **내 UTXO들을 모두 모아서 합산해야** 합니다

---

## 이제 이 개념을 코드로 옮기면?

바로 이렇게 정의할 수 있습니다:

```ts
export class UnspentTxOut {
  txOutId: string; // 내가 받은 과거 트랜잭션 ID
  txOutIndex: number; // 그 트랜잭션의 몇 번째 출력이었는지
  account: string; // 수신자 (= 나의 주소)
  amount: number; // 해당 출력에 들어있던 금액
}
```

이 구조는 "과거에 나에게 들어왔지만, 아직 아무 데도 쓰지 않은" 출력값입니다.  
즉, **내가 지금 쓸 수 있는 자산 조각**입니다.

---

## 결론: 이게 바로 `UTXO`입니다.

- **잔액**은 계좌에 저장된 숫자가 아니라,  
  **아직 소비되지 않은 TxOut 들의 합계**입니다.
- 이 모델을 통해 **트랜잭션 추적, 이중 지불 방지, 투명한 검증**이 모두 가능해집니다.

> 앞으로 우리는 트랜잭션을 생성할 때마다  
> **필요한 금액만큼의 UTXO를 모아서 TxIn으로 참조하고**,  
> **TxOut으로 새로운 소유권을 만들어내는** 과정을 반복하게 될 것입니다.
