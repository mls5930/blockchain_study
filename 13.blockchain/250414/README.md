## 저번 시간에는 뭐했을까?

`트랜잭션`

지난 시간에는 지갑을 만들고, 선택하고, 불러오는 흐름까지 완성했어요.  
이제는 **“내 지갑에서 돈을 보내는”** 구조를 직접 구현해볼 차례입니다.

트랜잭션은 단순한 값 전달이 아니라,  
**“내가 어떤 돈을 써서 → 누구에게 얼마를 주는지”**를  
명확하게 정의하는 구조입니다.

## 저번 시간의 목차

1. 내가 가진 돈 중에서 쓸 돈(UTXO)을 고르고
2. 누구에게 얼마를 줄지 정하고
3. 필요하면 거스름돈도 다시 내 지갑으로 돌려받고
4. 이 정보를 하나로 모아서 고유한 해시로 만든 뒤
5. 트랜잭션 풀에 저장합니다

## 저번 시간의 핵심

- 트랜잭션은 **"보낸 사람이 진짜 본인이라는 증명(서명)"**과  
  **"위조되지 않았다는 증명(해시)"**이 반드시 들어가야 해요.
- 오늘은 브라우저가 아닌 코드 흐름을 따라가며  
  트랜잭션이 어떻게 만들어지는지를 단계별로 정리해볼 거예요.
- 마지막에는 **“보낸다”라는 행위가 구조적으로 어떤 흐름으로 이루어지는지**  
  눈에 딱 그려지게 될 겁니다.

## 저번 시간에는 뭐했을까?

### `트랜잭션 생성`

지난 시간에는 지갑에서 잔액을 조회하고,  
**“보낸다”**는 행위가 실제로 어떻게 만들어지는지 흐름을 구현했어요.

우리는 단순히 숫자만 이동시키는 것이 아니라,  
**"어떤 돈을 써서, 누구에게 얼마나 보내고, 남은 돈은 다시 나에게 돌려준다"**는  
명확한 구조를 가진 **트랜잭션 객체(Transaction)** 를 직접 만들었습니다.

---

## 저번 시간의 목차

1. `getUTXO()` – 내가 가진 잔액(UTXO) 조회
2. `isAmount()` – 보낼 수 있는 금액인지 확인
3. `createInput()` – 입력(TxIn) 구성
4. `createOutInput()` – 출력(TxOut) 구성 (수신자 + 거스름돈)
5. `serializeRow()` – 고유 해시 생성
6. 트랜잭션 풀에 `create()`로 등록

---

## 저번 시간의 핵심

- **TxIn + TxOut + Hash = 하나의 트랜잭션(TransactionRow)**
- 서명(Signature)은 "진짜 보낸 사람이 맞는가?"를 증명하는 핵심
- 해시(Hash)는 "트랜잭션이 위조되지 않았는가?"를 증명하는 고유한 식별자
- 마지막으로 트랜잭션은 **transactionPool에 등록되어 대기**하게 됨

# 이번 시간에는 뭐할까?

## UTXO 구조화 및 반영

지난 시간까지는 **트랜잭션을 생성하고**,  
그걸 **트랜잭션 풀에 올려두는 흐름**까지 완성했어요.

그런데 아직은 **실제로 돈이 이동한 게 아닙니다.**  
지금은 그저 **"이렇게 보내겠다"**고 선언한 상태일 뿐이죠.

---

이번 시간은 이 질문에서 시작됩니다:

> **“그래서… 너 얼마 남았는데?”**

---

트랜잭션이 **블록에 포함되었다고 가정**하고,  
그 결과 **실제로 사용된 잔액은 빼고**,  
**새로 생긴 잔액은 등록하는** 흐름을 구현할 거예요.

즉,  
**“잔액 상태를 업데이트하는 구조,  
그걸 어떻게 시스템 안에 정확하게 반영할 것인가?”**  
이게 오늘 수업의 핵심입니다.

---

## 이번 시간의 목차

1. `Unspent` 클래스의 `create()` 메서드  
   → TxOut을 기반으로 새로운 UTXO 등록

2. `Unspent` 클래스의 `delate()` 메서드  
   → TxIn을 기반으로 기존에 썼던 UTXO 제거

3. `update()` 메서드  
   → 위 두 동작을 하나의 트랜잭션 기준으로 통합 적용

4. `getAmount()`  
   → 내가 가진 UTXO들의 잔액 합산

5. `isAmount()`  
   → 특정 금액을 보낼 수 있는지 검증

6. TDD 기반으로 Bob이 Alice에게 7코인을 보내는 전체 흐름 점검

---

## 이번 시간의 핵심

- **트랜잭션이 블록에 들어가야 진짜 잔액이 바뀐다.**
- **UTXO는 구조적으로 등록과 제거가 쌍으로 이루어져야 한다.**
- 우리는 단순히 배열을 조작하는 것이 아니라  
  **"신뢰할 수 있는 잔액 상태를 시스템적으로 어떻게 유지할 것인가?"**를 배우는 중이다.
- 마지막에는 트랜잭션을 실행하고 나면  
  실제로 UTXO가 **어떻게 바뀌었는지 눈으로 확인**할 수 있게 된다.
