# payable: 돈을 주고받을 수 있는 특별한 함수

Solidity에서 우리는 이미  
**접근 제어자(public, private)**,  
**함수 속성(view, pure)**  
같은 기본적인 함수 설정들을 배워왔습니다.

하지만 그들과는 조금 다른,  
**특별한 의미를 가진 함수**가 존재합니다.

바로,  
**payable** 함수입니다.

**payable 함수는 이 ETH를 주고받을 때 사용되는 통로입니다.**

조금만 더 쉽게 말하면,

- ETH를 보내고 싶다?
- 그러면 **payable 함수**를 호출하면 됩니다.

그리고 이 과정은  
단순한 함수 실행이 아니라,  
**진짜 돈이 움직이는 일**이기 때문에  
**트랜잭션(transaction)** 이 발생합니다.

쉽습니당.

**그런데 여기서 정말 중요한 질문이 생깁니다.**

**"왜 Solidity는 payable이라는 단어까지 써가면서 돈을 주고받는 행위를 명시하도록 했을까?"**

## 왜 payable이 특별한가?

스마트 컨트랙트는 기본적으로  
**외부로부터 돈을 거부합니다.**

아무 함수나 호출해서 이더를 보내려고 하면,  
**트랜잭션은 실패합니다.**

왜 그럴까요?

단순합니다.

- 돈을 받는다는 것은 단순히 데이터를 저장하는 일이 아닙니다.
- **경제적 책임**을 함께 받아들이는 일입니다.

## 만약 함부로 이더를 받을 수 있다면?

가정해봅시다.

만약 스마트 컨트랙트가  
**아무런 제약 없이**  
**payable 선언 없이**  
**외부에서 이더를 받을 수 있게 만들어졌다면?**

- 누군가 악의적으로 이더를 전송하고
- 스마트 컨트랙트를 오염시키고
- 자금을 꼬이게 만들 수 있습니다.

예를 들면,  
**의도치 않은 컨트랙트 잔고 누적**으로 인해,  
원래 의도한 로직이 꼬일 수도 있습니다.

---

실제로,  
**이더리움 백서(Ethereum Whitepaper)** 에도 이런 기본 철학이 명시되어 있습니다.

> **"모든 계약은 명확해야 하고,  
> 자금을 이동시키는 모든 경로는 네트워크 참가자가 검증할 수 있어야 한다."**

백서가 말하는 핵심은,  
**"돈이 오가는 모든 흐름은 의도적"**이어야 하며,  
**"모든 노드가 코드만 보고 납득할 수 있어야 한다"**는 것입니다.

## 그래서 Solidity는 요구합니다.

> **"정말로 돈을 받고 싶다면,  
> 코드에 명확히 표시해라.  
> '나는 돈을 받을 준비가 되어 있다'고."**

그 표시가 바로  
**payable**입니다.

---

## payable은 신호입니다

payable 키워드를 통해 우리는 외부에 신호를 보냅니다.

1. **이 함수는 돈을 받을 수 있다.**
2. **그 의도가 명확히 설계되어 있다.**
3. **코드를 보면 그 이유를 알 수 있다.**

---

전 세계 수많은 노드들은  
우리가 작성한 스마트 컨트랙트 코드를 읽습니다.

- 만약 payable이 선언되어 있다면,
- "아, 이 컨트랙트는 돈을 받을 수 있도록 설계되었구나."
- "그리고 왜 그렇게 만들었는지, 코드를 보면 이해가 된다."

이렇게 납득할 수 있어야 합니다.

그 선언이 바로  
**payable**입니다.

## 이걸 통해 우리는 무엇을 알 수 있을까?

payable이라는 키워드를 통해 우리는 알 수 있습니다.

- 이 함수는 **이더를 받을 수 있는 공식적인 관문**이다.
- 이 함수는 호출될 때 **금전적 트랜잭션이 함께 발생할 수 있다**.
- 이 컨트랙트는 **경제적 행동(돈의 수수)** 을 공식적으로 허용하고 있다.

## 실제로는 어떻게 작동할까?

이 payable 함수는 호출할 때

- `msg.value`를 통해 보내는 이더를 받을 수 있습니다.
- 받은 이더는 자동으로 **컨트랙트의 잔고**에 쌓입니다.

```javascript
await contract.methods
  .deposit()
  .send({ from: account, value: web3.utils.toWei("1", "ether") });
```

- 이렇게 호출하면 1 ETH가 네트워크를 통해 이 컨트랙트로 전송됩니다.
- 그리고 이 기록은 네트워크에 **영원히 남습니다**.

## 그런데, 여기서 중요한 질문이 생깁니다.

> **"CA가 이더를 받을 수 있다고요?  
> 보통은 EOA(사람)끼리 주고받는 거 아닌가요?"**

---

좋은 질문입니다.

표면적으로 보면,  
**EOA(Externally Owned Account)끼리 이더를 주고받는 게 기본**처럼 보일 수 있습니다.

하지만, 이더리움 네트워크 구조를 조금 더 깊이 들여다보면,  
**컨트랙트(CA, Contract Account)** 역시  
네트워크 상의 **정식 주소**로 인정받습니다.

CA가 왜 돈을 받을 수 있는가?를 설명하겠습니다.  
다음 글로 가시졍
