# 함수의 반환(returns)과 반환 실행(return)

Solidity에서 함수를 작성할 때, 우리는 자주 다음과 같은 문법을 사용합니다.

```solidity
function add() public pure returns (uint) {
    return 5;
}
```

이 코드에는 두 가지 중요한 키워드가 등장합니다.

- **`returns`**: 이 함수가 어떤 타입의 값을 반환할지 약속합니다.
- **`return`**: 이 함수가 실행된 후 실제로 어떤 값을 반환할지 지정합니다.

---

## 하지만 여기서 중요한 질문이 생깁니다.

> **"함수에 꼭 returns를 써야 할까?"**  
> **"return을 하면 자바스크립트로 결과가 바로 넘어올까?"**

단순한 문법처럼 보이지만,  
이 두 가지 키워드는 스마트 컨트랙트 세계에서 아주 중요한 의미를 가집니다.

---

## returns: 약속하는 선언

Solidity에서 `returns (타입)`을 명시하는 것은  
단순히 결과 타입을 적는 것을 넘어서,  
**"이 함수가 이런 결과를 돌려줄 것이다"**라는  
**공식적인 계약 약속**을 선언하는 행위입니다.

- 이 함수가 어떤 형태의 결과를 제공할지
- 외부 호출자는 무엇을 기대할 수 있을지

**사전에 명확히 규정**하는 것입니다.

---

### 그런데 returns를 꼭 써야 할까?

- **반환할 값이 없다면**, returns를 명시하지 않아도 됩니다.
- **반환할 값이 있다면**, returns를 명시하는 것이 올바른 설계입니다.

> **"반드시 returns를 써야 한다"는 것은 아닙니다.  
> 다만 반환할 값이 있을 때 returns를 명시하는 것은  
> 계약의 명확성과 신뢰성을 지키기 위한 기본 원칙입니다."**

---

## return: 약속을 이행하는 실행

함수 안에서는 `return` 키워드를 사용해  
실제로 반환할 값을 지정합니다.

- returns는 "이 타입을 돌려주겠다"는 약속이라면,
- return은 "이 결과를 실제로 돌려주겠다"는 실행입니다.

```solidity
function add(uint a, uint b) public pure returns (uint) {
    uint result = a + b;
    return result;
}
```

여기서,

- `returns (uint)`로 uint 타입 반환을 약속했고,
- `return result;`로 실제 결과를 돌려줬습니다.

---

## 그런데 return을 하면, 결과가 바로 돌아오는가?

여기서 조심해야 합니다.

> **Solidity 함수의 return은 내부적으로 결과를 만들지만,  
> 실제로 외부(자바스크립트 등)로 돌아오는 방식은 다릅니다.**

---

### 두 가지 호출 방식

1. **send()**

   - 트랜잭션을 발생시킵니다.
   - 블록에 기록됩니다.
   - return 값은 직접 받을 수 없습니다.

2. **call()**

   - 트랜잭션 없이 읽기만 합니다.
   - return 값을 바로 받을 수 있습니다.

---

### 간단한 그림

```
Solidity 함수 실행
    ↓
EVM 내부 결과 생성 (return)
    ↓
- send(): 결과는 블록에 기록만, return 값은 직접 못 받음
- call(): return 값을 바로 받아서 활용 가능
```

---

## 정리하면

- Solidity 함수에서 return을 하면 내부적으로 결과가 만들어진다.
- 하지만 외부(자바스크립트)에서 그 결과를 바로 받으려면 반드시 **call()** 방식으로 호출해야 한다.
- **send()** 방식으로 호출하면 블록체인에 기록되지만, return 값은 직접 받지 못한다.

---

# 최종 요약

| 키워드         | 역할                      | 비고                                   |
| :------------- | :------------------------ | :------------------------------------- |
| returns (타입) | 반환할 데이터 타입을 약속 | 반환할 값이 있을 때만 명시             |
| return 값      | 실제로 반환할 값을 지정   | call() 방식일 때 외부에서 받을 수 있음 |

---

# 핵심 메시지

- `returns`는 결과 타입에 대한 **사전 약속**이다.
- `return`은 실행 결과를 **실제로 넘기는 행위**이다.
- return을 했다고 무조건 외부(자바스크립트)로 값이 넘어오는 것은 아니다.
- 외부에서 값을 받으려면 **call()** 호출을 사용해야 한다.
