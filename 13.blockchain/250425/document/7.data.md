# 무엇을 실행하는가? (`data`)

---

## 1. 트랜잭션에는 반드시 두 가지 정보가 필요합니다

| 속성   | 질문으로 바꾸면?              | 실제 의미                                                              |
| ------ | ----------------------------- | ---------------------------------------------------------------------- |
| `to`   | **"어디로 보낼 건데?"**       | 이 트랜잭션이 도달할 주소 (컨트랙트 주소 or 계정 주소)                 |
| `data` | **"그 주소에서 뭘 할 건데?"** | 트랜잭션이 실행할 함수나 전달할 명령 (바이트코드로 인코딩된 실행 요청) |

---

## 2. `to`와 `data`는 항상 세트로 이해해야 합니다

```js
contract.methods.reset().send({ from: address });
```

이 한 줄은 다음과 같은 의미를 담습니다:

- `to`: 컨트랙트 주소 → **"저기 있는 컨트랙트를 실행할게요"**
- `data`: reset() 함수 호출 정보 → **"그 중에서도 reset() 함수를 실행할게요"**

---

## 3. `data`는 뭐가 들어가나요?

EVM은 문자열이나 함수 이름을 이해하지 못합니다.  
그래서 `data`에는 다음과 같은 바이트 정보가 들어갑니다:

- 함수 식별자 (function selector) – 앞 4바이트
- 함수 인자 (있다면) – 그 뒤를 따라오는 인코딩된 값

예: `reset()`은 인자가 없기 때문에 아래처럼 생깁니다:

```json
"data": "0x3f4ba83a"
```

이건 `reset()` 함수 이름을 해싱한 결과입니다.

---

## 4. 직접 쓴 적은 없지만 Web3.js가 대신 만들어줍니다

```js
contract.methods.reset().send({ from: address });
```

이 코드를 실행하면 Web3.js가 내부적으로 이렇게 구성합니다:

```json
{
  "to": "0x컨트랙트주소",
  "data": "0x3f4ba83a"
}
```

우리는 `data`를 직접 다루지 않았지만,  
→ 실제로는 함수 실행 요청이 **바이트 코드 형태로 data 필드에 들어가 전송**된 것입니다.

---

## 5. 언제 `data`가 필요하고 언제 필요 없나요?

| 상황                              | `data` 필요 여부 | 이유                                                      |
| --------------------------------- | ---------------- | --------------------------------------------------------- |
| 이더 전송 (단순 송금)             | ❌               | 함수 실행이 없음. 그냥 잔액만 이동                        |
| 스마트 컨트랙트 함수 호출         | ✅               | 어떤 함수를 실행할지 반드시 지정해야 함                   |
| 스마트 컨트랙트 **배포** 트랜잭션 | ✅               | `data` 안에 아예 컨트랙트 바이트코드를 통째로 넣어 전송함 |

---

## 6. to vs data — 실행 구조의 핵심

| 속성   | 기능 요약                           | 질문으로 바꾸면?                     |
| ------ | ----------------------------------- | ------------------------------------ |
| `to`   | **"어디 있는 프로그램을 실행할지"** | → "어디로 가서 실행할 거야?"         |
| `data` | **"그 프로그램에서 뭘 실행할지"**   | → "거기 가서 어떤 함수 실행할 거야?" |

- `to`: **실행할 프로그램이 어디 있는지** 알려줌
- `data`: **그 프로그램에서 무슨 작업을 해야 하는지** 알려줌

---

## 7. 실습 복기 – 4월 24일의 `reset()` 트랜잭션

우리가 `reset()` 함수를 작성하고 실행했을 때,  
실제로 이런 트랜잭션 구조가 발생했습니다:

```json
{
  "from": "0x내지갑주소",
  "to": "0x컨트랙트주소",
  "data": "0x3f4ba83a"
}
```

→ 이 `data`가 바로 **“reset() 함수 실행”이라는 요청을 EVM이 알아듣게 만든 것**입니다.

---

## 8. 정리

- `data`는 **“컨트랙트야, 이 함수를 실행해줘”** 라는 메시지를 바이트 코드로 담은 필드입니다.
- 우리는 직접 작성하진 않지만, Web3.js가 `contract.methods.함수().send()` 구문을 통해 자동 생성합니다.
- 블록체인은 코드가 아닌 **데이터 중심의 시스템**입니다.  
  → 우리가 내린 “의미”는, `data`라는 **기계가 읽을 수 있는 형태**로 바꿔서 보내야 합니다.
