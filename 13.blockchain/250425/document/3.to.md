# 무엇을 실행하라고 전달할 것인가? — `data` 필드의 역할

근데 to 설명하는거 맞음!

---

## 1. 코드 실행은 결국 “데이터 전송”입니다

여러분은 스마트 컨트랙트를 이렇게 실행하죠:

```js
contract.methods.reset().send({ from: address });
```

이 코드 안에서 정말 중요한 건 뭘까요?

- 컨트랙트 주소? (`to`)
- 내 지갑 주소? (`from`)
- 아니면… 함수 이름인 `"reset"`?

정답은:

> **"EVM은 reset이라는 글자를 모른다"는 사실입니다.**

---

## 2. EVM은 문자열을 이해하지 못합니다

EVM은 함수 이름도, 코드도, 의미도 모릅니다.  
EVM은 **데이터**만 보고 동작합니다.  
정확히 말하면:

> **“이 컨트랙트에 이 데이터를 전달할게.  
> 이 데이터가 의미하는 대로 상태를 바꿔줘.”**

즉, EVM은 트랜잭션 안의 `data` 필드만 보고  
“이건 reset()을 호출하라는 뜻이구나”라고 **해석**합니다.

---

## 3. 트랜잭션에서 `data`의 위치는?

트랜잭션은 다음 두 필드로 실행을 결정합니다:

| 속성   | 역할                                  |
| ------ | ------------------------------------- |
| `to`   | **어느 주소의 컨트랙트를 대상으로**   |
| `data` | **그 컨트랙트에게 무엇을 실행시킬지** |

> `to`가 “어디로?”라면,  
> `data`는 **“거기 가서 뭘 해?”**입니다.

---

## 4. 그럼 `data` 안에는 무엇이 들어 있을까요?

- 함수 이름은 안 들어갑니다.
- 사람이 읽는 코드는 안 들어갑니다.
- 오직 **기계가 이해할 수 있는 바이트코드**만 들어갑니다.

정확히는:

- **앞 4바이트** → 함수 식별자 (function selector)  
  → `reset()`은 `0x3f4ba83a`로 해싱됩니다.
- **뒤에 이어지는 바이트들** → 함수 인자가 있을 경우, 인코딩된 값들

예시 (reset은 인자가 없으므로 selector만):

```json
{
  "data": "0x3f4ba83a"
}
```

---

## 5. 요점: `data`는 코드가 아니라 “명령을 담은 바이트 메시지”

우리가 말로 "reset()을 실행해주세요"라고 해도  
EVM 입장에선 이건 단순히:

> **“0x3f4ba83a”라는 데이터가 들어왔으니,  
> reset()을 실행하라는 뜻이구나”**

이렇게 **데이터 기반 해석 시스템**입니다.

---

## 6. 왜 이름이 `data`일까?

이더리움은 구조상  
코드를 직접 호출하는 시스템이 아닙니다.

- 코드를 "직접 실행"하는 게 아니라
- **"데이터를 보내고"**,
- **"그 데이터에 따라 코드를 해석해서"** 실행합니다.

즉, **우리는 코드가 아니라 데이터를 보냅니다.**  
→ 이 개념이 바로 `data`라는 필드에 담겨 있는 거예요.

> `data`는 단순한 옵션이 아닙니다.  
> **“내가 뭘 실행하고 싶은지”를 표현하는 핵심입니다.**

---

## 7. 실습 예시를 다시 보면

우리는 이렇게 실행했습니다:

```js
contract.methods.reset().send({ from: address });
```

하지만 이건 내부적으로 다음과 같이 바뀝니다:

```json
{
  "to": "0x컨트랙트주소",
  "data": "0x3f4ba83a"
}
```

여기서 `data`가 없으면 아무 일도 일어나지 않습니다.  
컨트랙트는 어떤 함수를 실행해야 할지 몰라 멈춥니다.

---

## 8. 마무리 요약

| 속성   | 역할                                                              |
| ------ | ----------------------------------------------------------------- |
| `to`   | 어느 컨트랙트 주소로 요청을 보낼 것인가                           |
| `data` | **그 컨트랙트에서 뭘 실행하고 싶은가?** (기계 해석 가능한 메시지) |

> 이더리움은 **“누구에게, 어떤 데이터를 보냈는가”**로  
> 모든 실행을 해석하는 시스템입니다.

---

## 이걸 이해하면 다음도 자연스럽게 알 수 있습니다:

- 왜 Web3.js가 내부적으로 자동으로 `data`를 만들어주는지
- 왜 트랜잭션만 보고도 "이건 reset 함수 실행이구나"라고 우리가 파악할 수 있는지
- 그리고 나중에는 우리가 직접 `data`를 만들어서  
  **트랜잭션을 수동 구성하는 구조로 넘어갈 수 있다는 것**
