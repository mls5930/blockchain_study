# 8. 그렇다면 메타데이터를 어디에 둘까?

우리는 앞에서 NFT의 메타데이터(JSON)가 아주 중요하다는 걸 배웠죠?
그 안에 이름, 설명, 이미지, 속성이 다 들어 있으니까요.

그럼 이 질문을 던져볼 수 있어요:

> “그럼 이 JSON 파일, 그냥 블록에 올리면 되는 거 아니에요?”
> “이더리움 위에 올리면 더 안전하고 영구적일 것 같은데요?”

정답은 이렇습니다.

> **네, 올릴 수 있어요.**
> 하지만 현실적으로는 대부분 그렇게 하지 않습니다.

## 왜냐고요? 이유는 크게 두 가지입니다.

### 1. “온체인 저장”은 너무 비쌉니다

여러분, 우리가 지금까지 개발한 것들을 떠올려보세요.
스마트 컨트랙트를 배포할 때,
모든 상태값은 결국 **블록에 기록되는 형태로 저장**되죠?

그런데 이 블록 하나하나가…
**영구 저장소이고, 누구나 검증 가능한 구조**인 만큼
하나 저장할 때마다 **가스비가 발생**합니다.

단순한 숫자나 불린 값 하나 저장할 때는 문제가 없어요.
근데 지금 NFT에서 저장하려는 건 어떤 데이터죠?

- `"name"`: 문자열
- `"description"`: 긴 설명 텍스트
- `"image"`: 경로 전체가 길죠
- `"attributes"`: 배열 안에 여러 개의 객체

이걸 전부 블록에 올린다고 해보세요.
→ **가스비가 폭발합니다.**

그리고 중요한 건,
NFT는 하나만 발행하는 게 아니라,
**100개, 1000개, 심지어 1만 개씩 발행**하죠?

> 그 많은 데이터를 전부 블록에 올리는 순간?
> 스마트 컨트랙트 배포 비용이 수백, 수천만 원까지 치솟습니다.

### 2. “온체인 저장”은 수정이 어렵습니다

두 번째 이유는 바로 **유연성 부족**이에요.

생각해보세요.
내가 NFT를 발행했는데, 이미지 링크에 오타가 있었어요.
아니면 기획이 바뀌어서, 이미지 파일 이름을 바꿔야 해요.

그런데 그 링크가 이미 **블록체인 안에 박혀 있다면?**

→ 다시 수정할 수 없습니다.
→ 스마트 컨트랙트를 통째로 다시 배포해야 합니다.

NFT 메타데이터는 생각보다 “변경”이 필요한 상황이 많습니다.

- 프로젝트 초기에 placeholder 이미지를 넣어뒀다가 나중에 진짜 이미지로 교체해야 하는 경우
- 테스트넷에서 사용하다가, 실제 서비스에서 이미지 경로만 바꾸고 싶은 경우
- 아예 `reveal` 개념을 사용해서, 특정 시점에 속성이나 이미지가 바뀌도록 설계할 때

이 모든 게 **온체인에는 불가능하거나, 굉장히 불편**합니다.

---

### 그래서 대다수 프로젝트는 이렇게 결론 내립니다:

> “메타데이터는... 굳이 블록에 다 올릴 필요 없다.
> 대신 외부에 저장하고,
> **그걸 가리키는 주소만 블록에 기록하자.”**

---

이제 다음 질문은 이거죠:

> “그럼 외부 저장소는 어떤 걸 써야 하나요?”
> “AWS처럼 중앙화된 클라우드도 있고,
> IPFS처럼 분산 저장 시스템도 있다는데?”

## 메타데이터는 결국 ‘외부 저장소’에 둡니다

그러면 그 외부 저장소로는 뭐가 있을까요?

크게 보면 두 가지로 나뉘어요.

### 1) **클라우드 기반 저장소** – AWS, Azure 같은 곳

이건 우리가 웹 개발에서 자주 쓰는 방식이에요.
Amazon S3 같은 데다가 JSON 파일 올려놓고,
그 URL을 `tokenURI()`가 반환하도록 하면 돼요.

하지만 문제는 이거죠:

> “이건 결국 **누군가의 서버에 의존한다**는 거예요.”

NFT의 철학은 **중앙 없이, 누구의 통제도 받지 않는 구조**인데,
그 중요한 메타데이터가 **회사 서버에만 존재한다?**
→ 누가 그 파일을 바꿔치기하거나, 삭제해도 아무도 모른다면?

→ **신뢰할 수 없겠죠.**

---

### 2) **분산 저장 시스템 – IPFS**

그래서 등장한 게 바로 **IPFS**입니다.

IPFS는 인터넷의 파일 저장 방식을 아예 바꿔보자는 철학으로 시작된 프로젝트예요.
한마디로 말하자면,

> “파일을 중앙 서버가 아니라, 모든 참여자들이 나눠서 저장하자.”
> “그리고 파일 주소는 그 파일의 내용으로부터 계산된 해시로 정하자.”

즉, **파일 내용이 같으면 주소도 같고, 내용이 바뀌면 주소도 바뀌는 구조**예요.
(이게 왜 중요한지는 다음 파트에서 자세히 얘기할게요)

---

### 그래서 요약하자면

NFT의 메타데이터는 아래 중 하나에 저장돼야 해요:

| 방식     | 예시          | 장점                            | 단점                             |
| -------- | ------------- | ------------------------------- | -------------------------------- |
| 클라우드 | AWS, Azure    | 빠르고 편함                     | 중앙화. 삭제/변조 가능성 있음    |
| 분산형   | IPFS, Arweave | 변경 불가능한 주소. 철학에 적합 | 초기 진입장벽. 관리 조금 더 필요 |

NFT 철학에 가장 어울리는 건 IPFS예요.  
그래서 요즘은 대부분의 프로젝트가 **IPFS에 JSON 파일을 올리고,**  
그 주소를 `tokenURI()`가 반환하도록 설계합니다.
