# 전체적인 실행 흐름

지금까지 하나하나 기능을 구현하면서

- random 생성
- 게임 시작
- 보상 지급
- 상태 관리

등을 배웠습니다.

하지만 **부분적으로만 이해하고 있으면**  
"전체 구조가 어떻게 연결되는지" 헷갈릴 수 있습니다.

"**스마트 컨트랙트 개발은 기능 단위로 만드는 것도 중요하지만,  
전체 흐름을 이해하고 머릿속에 그림을 그리는 것이 훨씬 더 중요합니다.**"

그래서,  
지금까지 구현한 모든 내용을  
**'한 번의 흐름'으로 정리해서 체계적으로 이해**해야 합니다.

## Baseball 게임 전체 실행 흐름

| 단계 | 설명                                       | 핵심 포인트                                        |
| ---- | ------------------------------------------ | -------------------------------------------------- |
| 1    | 컨트랙트를 배포한다                        | random(정답) 숫자가 자동으로 생성된다              |
| 2    | 웹사이트를 통해 메타마스크 지갑을 연결한다 | 사용자의 계정을 확보한다                           |
| 3    | 스마트 컨트랙트 인스턴스를 생성한다        | 화면과 스마트 컨트랙트를 연결한다                  |
| 4    | render() 함수를 실행한다                   | 현재 상태(progress, reward)를 화면에 출력한다      |
| 5    | 사용자가 숫자를 입력한다                   | 100~999 사이의 3자리 숫자                          |
| 6    | "게임 시작" 버튼을 누른다                  | gameStart() 함수가 호출된다                        |
| 7    | 입력값 검증(require)                       | 3자리 숫자인지 확인한다                            |
| 8    | 시도 횟수(progress) 증가                   | 매 입력마다 progress를 1씩 증가시킨다              |
| 9    | 입력한 숫자가 정답과 비교된다              | \_value == random                                  |
| 10   | - 정답일 경우                              | 이더 전액을 플레이어에게 전송하고 게임 종료        |
| 11   | - 오답일 경우                              | 입장료(0.01 ETH)가 누적되어 reword 증가            |
| 12   | 게임 상태를 확인한다                       | gameState가 playing인지 gameOver인지 render로 표시 |

## 실행 흐름을 자연스럽게 그려보면

1. Contract를 배포하면 random이 생성된다.
2. 메타마스크로 지갑을 연결하고,
3. 화면에 현재 게임 상태(progress, reward)를 출력하고,
4. 사용자가 3자리 숫자를 입력하고,
5. "게임 시작" 버튼을 누르면 스마트 컨트랙트에 트랜잭션이 전송된다.
6. 스마트 컨트랙트는 입력을 검증하고,
7. 진행도를 올리고,
8. 정답 여부를 판별하고,
9. 맞으면 보상을 지급하고 게임을 종료하며,
10. 틀리면 입장료를 누적하고 다시 진행할 수 있게 한다.

- 스마트 컨트랙트는 **하나의 함수만으로 게임을 처리하지 않는다.**
- **random 설정 → 입력 검증 → 상태 업데이트 → 보상 지급**  
  이 모든 흐름이 유기적으로 연결되어야 한다.
- 눈앞의 기능만 보지 말고,  
  **항상 '전체 흐름'을 머릿속에 그리고 있어야 한다.**

---

- 부분별 기능이 아니라, 전체 연결 흐름을 반드시 이해해야 한다.
- 스마트 컨트랙트 → 웹사이트 → 지갑 → 트랜잭션 → 상태 변화까지  
  모든 구조가 하나의 흐름으로 연결되어야 진짜 완성이다.
