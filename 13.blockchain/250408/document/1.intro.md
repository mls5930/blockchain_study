## 어제 우리가 하려던 건 딱 두 가지였어요.

1. **블록이 쌓이면 체인이 된다.**
2. **체인이 길어지면 난이도를 조절해야 한다.**

---

### ❗ 그런데 아직 의문이 있죠?

> ❓ “난이도는 왜 조절하는데요?”
> ❓ “그걸 누가 결정하죠?”
> ❓ “어떤 시점에 바뀌죠?”

## 오늘 우리가 확인할 건 이것!

> **정해진 주기마다, 난이도가 제대로 조절되는가?**

## 확인 방법은 단 두 가지!

1. **구현 흐름**

   - `getDifficulty()`는 어떻게 동작하는가?

2. **실행 흐름 (TDD)**

   - 블록을 쌓았을 때, 정말 난이도가 바뀌는가?

## 실험을 위한 기본 가정

- 우리는 **이미 체인이 길게 쌓였다고 가정**할 겁니다.
- 그래서 블록을 만들 때 다음과 같은 함수가 호출됩니다:

```ts
Block.getDifficulty(newBlock, adjustmentBlock, previousBlock);
```

- 호출 시점: 블록이 생성될 때 (constructor() 내부)

## 핵심 포인트 요약

| 개념              | 설명                       |
| ----------------- | -------------------------- |
| `newBlock`        | 새로 만들 블록             |
| `previousBlock`   | 직전 블록 (난이도 참고용)  |
| `adjustmentBlock` | 난이도 조정 기준 시점 블록 |

## 조정 방식은 딱 두 단계입니다

### 1. **아직 조정할 시점이 아님**

```ts
if (height % 주기 !== 0) → 그냥 직전 난이도 따라감
```

### 2. **조정할 시점이 됨**

```ts
실제 걸린 시간 < 예상의 절반 → 난이도 +1
실제 걸린 시간 > 예상의 2배 → 난이도 -1
아니면 → 그대로
```

## 이것만 기억해도 충분합니다!

- **난이도 = 블록을 얼마나 어렵게 만들까?**
- **블록이 많아지면, 조정이 필요하다.**
- **그걸 판단하는 기준이 바로 `getDifficulty()`다.**

## 그리고 곧 이런 자료를 줄 겁니다

1. `chain.test.ts 실행 흐름 설명` – 눈으로 보는 실행 결과
2. `1 ~ 7.md` – 실행 흐름 요약 정리
   - [text](5.whenDifficulty.md)
   - [text](6.whenDifficultyEasy.md)
     위 두개는 동일한 내용을 담고 있습니다.  
     단, 요약하냐 하지 않냐로 나뉩니다.
3. 실제 테스트 코드 실행

## 오늘 이 내용을 바탕으로,

**체인 교체**와 **롱기스트 체인 룰**로 자연스럽게 넘어갈 겁니다.
