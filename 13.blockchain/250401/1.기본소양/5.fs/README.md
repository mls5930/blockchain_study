# fs

`fs`(File System) 모듈은 **Node.js에서 파일과 디렉터리를 다루는 가장 기본적이자 강력한 도구**인데요,  
단순히 "파일을 읽고 쓴다"는 기술적인 시각보다는,  
다음과 같은 **“운영체제의 시선 + 웹 백엔드의 실용성”**으로 바라보면 훨씬 더 깊이 있게 이해하고 잘 다룰 수 있습니다.

---

## 1. **“운영체제의 창”으로 보기: fs는 곧 사용자 ↔ 하드디스크 사이의 인터페이스다**

- `fs`는 **운영체제의 파일 시스템 API를 감싼 것**  
  → 즉, 우리가 쓰는 모든 메서드는 결국 OS의 시스템 콜(`read`, `write`, `open`, `unlink`, `mkdir`...)과 연결됨
- 따라서 `fs`를 이해하려면:
  - **파일의 상태(존재 유무, 권한, 메타정보)**를 다루는 시선
  - **디스크 입출력 비용(Blocking vs Non-blocking I/O)**을 고려하는 시선이 필요

**생각해볼 질문**:

> "파일을 읽는다는 건 실제로 OS에 어떤 요청을 보내는 걸까?"  
> "이 작업이 블로킹이면 왜 성능 문제가 생길까?"

---

## 2. **“웹 백엔드의 실용성”으로 보기: fs는 데이터 저장소의 대안이자 도구다**

- `fs`는 단순히 파일 다루기 외에:
  - **로그 저장**
  - **이미지/첨부파일 업로드 후 저장**
  - **데이터 캐싱**
  - **템플릿 파일 불러오기**
  - **임시 파일 처리**

즉, **“내가 DB가 아닌 파일을 써야 하는 순간은 언제인가?”**를 고민하면 실전 응용력이 높아짐

---

## 3. **“비동기 I/O”에 대한 이해: 콜백 → Promise → async/await 흐름 파악**

- `fs`에는 `fs.readFile`, `fs.readFileSync`, `fs.promises.readFile` 이렇게 **동기/비동기/Promise 기반** 세 가지 방식이 존재
- 웹 서버에서 `fs.readFileSync()`를 쓰면 블로킹이 되어 성능에 악영향을 미침
- **fs.promises를 기반으로 async/await로 다루는 것이 가장 현대적 방식**

실습 팁:

```js
const fs = require("fs/promises");

const read = async () => {
  const content = await fs.readFile("./hello.txt", "utf-8");
  console.log(content);
};
read();
```

---

## 4. **“보안과 신뢰성”의 시선도 필요하다**

- 파일 입출력은 잘못 쓰면 **보안 구멍**이 될 수 있음
  - 경로 탐색 공격 (`../../../etc/passwd`)
  - 임시 파일 덮어쓰기
  - 사용자 권한 미검증 후 파일 조작

따라서 `fs`를 사용할 때는 항상 다음을 고려:

- `path.join()`으로 경로 보호
- 사용자 입력을 통한 경로 접근 막기
- 예외 처리 (`try-catch`, `.catch`) 필수

---

## 5. **fs를 통해 운영과 자동화를 이해하라**

- `fs`는 서버 운영에서도 매우 유용함:
  - 배치 스크립트 작성
  - 백업 파일 자동 저장
  - 서버 로그 주기적 정리

**fs는 단순한 모듈이 아니라 ‘서버 운영자의 도구’**이기도 함

---

## 🧭 결론: fs를 잘 다루기 위한 5가지 시선

| 시선          | 설명                                      |
| ------------- | ----------------------------------------- |
| OS 시선       | 시스템 콜의 감싸기. 디스크와의 인터페이스 |
| 백엔드 실용성 | 로그, 업로드, 캐시, 임시파일              |
| 비동기 흐름   | sync vs async vs Promise 기반 이해        |
| 보안 시선     | 경로 보호, 입력 검증, 에러 처리           |
| 운영 자동화   | 운영툴, 배치 처리, 백업 자동화 등         |
