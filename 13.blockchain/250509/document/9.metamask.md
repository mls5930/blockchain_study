# Metamask에서는 왜 `approve()`와 `transferFrom()`이 안 되는가 – 트랜잭션 주체 설명

먼저 한 가지 바로 잡고 가겠습니다:

> **“Remix에서는 `approve()`와 `transferFrom()`이 됩니다.”**
> Remix는 스마트 컨트랙트의 모든 public 함수에 대해
> **직접 인자 값을 넣고, 메타마스크로 서명까지 받아 실행할 수 있는 환경**입니다.

## 그런데… 왜 이런 제목이 필요한 걸까요?

바로 **Metamask 자체의 기본 UI**,
즉 **지갑 인터페이스 화면에서 제공하는 ‘전송’ 기능을 통해서는
`approve()`나 `transferFrom()`을 사용할 수 없기 때문입니다.**

## ❌ Metamask UI는 단순 전송만 지원

Metamask의 기본 ‘Send’ 화면은

- **ERC-20 토큰을 A가 B에게 직접 보내는 구조**만 지원합니다.
- 즉, 내부적으로 `transfer(to, amount)` 함수만 호출됩니다.

→ 사용자는 수신 주소와 수량만 입력하고,
→ 서명 후, `msg.sender → to`로 바로 토큰이 전송되는 구조입니다.

## ✅ 그런데 `approve()` / `transferFrom()` 구조는 어떨까요?

이건 좀 다릅니다:

### `approve()`

→ "나는 이 컨트랙트(CA)에게, 내 토큰을 일정량 사용할 수 있는 권한을 부여하겠다."

### `transferFrom()`

→ "권한을 위임받은 컨트랙트가, 내 잔액에서 직접 토큰을 가져간다."

---

이 구조는 기본적인 “Send” UI에서 구현이 불가능합니다.
왜냐하면…

- `transferFrom()`의 실행 주체는 내가 아니라 **컨트랙트(CA)**입니다.
- 즉, 내가 트랜잭션을 직접 서명해서 보내는 게 아니라,
  **컨트랙트가 내 잔액을 가져가는 구조**입니다.
- 이걸 실행하려면 → **Remix처럼 직접 컨트랙트에 함수 호출을 보내거나**,
  **React/Web3.js 코드로 명시적으로 요청**해야 합니다.

## 그래서 꼭 알아야 할 핵심:

> **Metamask는 “지갑”입니다.**

- 지갑은 단독으로 어떤 트랜잭션도 실행하지 않습니다.
- **스마트 컨트랙트의 함수를 호출하는 주체(Remix, React 등)**가 먼저 있어야 하고,
- 그 호출 요청이 들어오면, Metamask는
  **“비밀 키를 사용해 서명을 생성할지 여부”를 사용자에게 묻고,
  그 결과를 네트워크에 전달하는 역할**만 수행합니다.

즉,
Metamask는 **서명을 ‘직접 날리는’ 것이 아니라**,

> **“비밀 키를 통해 서명해도 괜찮습니까?”라는 요청을 사용자에게 전달하고,
> 그 동의에 따라 서명을 생성하고 → 트랜잭션에 첨부해주는 도구**입니다.

→ 이 구조는 **서명 그 자체는 사용자 동의 하에 이루어지며**,
→ **검증은 네트워크에서, 생성은 비밀 키로** 수행됩니다.
