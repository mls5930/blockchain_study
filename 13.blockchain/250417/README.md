## 저번 시간에는 뭐했을까?

지난 시간에 우리는  
트랜잭션이 **어떻게 만들어지고**,  
그 안에 **어떻게 보상이 포함되는지**까지 직접 다뤘어요.

하지만...  
**그걸 나 혼자 알고 있으면 무슨 소용이죠?**

> “블록체인은 탈중앙 시스템이에요.”  
> → 즉, **내가 만든 트랜잭션을 다른 노드들도 알아야 해요.**

이제부터는  
**“내가 가진 정보를 네트워크 전체에 어떻게 전파할 것인가?”**  
그 질문에 답할 차례입니다.

---

## 저번 시간의 목차

1. **HTTP vs TCP – 통신 구조의 차이 이해하기**  
   → 왜 단순한 HTTP 요청만으로는 충분하지 않은지

2. **P2P 네트워크 구조 설계하기**  
   → 소켓 기반 구조, 각 노드가 서버/클라이언트가 되는 구조

3. **메시지 구조(MessageType, IMessage) 정의하기**  
   → "나 블록 만들었어" 같은 메시지를 통일된 구조로 전송

4. **P2P 서버(P2P.ts), 클라이언트(Client.ts) 구현하기**  
   → 연결 수립, 메시지 수신/응답, 체인 요청/응답 흐름 직접 만들기

5. **Express + HTML을 통한 체인 시각화 및 테스트**  
   → 웹에서 블록 만들고, 다른 노드에 전파되는지 확인

---

## 저번 시간의 핵심

이번 수업의 핵심은 단 하나입니다:

> **“내 블록을 다른 노드에게 전파하라”**  
> → 그리고 동시에  
> **“다른 노드가 만든 블록도 받아들여라”**

---

❓ 이쯤에서 이런 질문이 나올 수 있어요:

> “꼭 블록을 만든 사람만 비트코인 네트워크에 참여하는 건가요?”

그건 아니에요!

- **나는 블록을 만들지 않아도**,  
  **다른 노드가 만든 블록을 받고 동기화에 참여**할 수 있어요.

- 동시에, **내가 만든 블록도 다른 노드들에게 전파**되어야 해요.

---

즉, **내가 이 네트워크의 일원이 되려면** 두 가지를 해야 합니다:

1. **나도 트랜잭션을 전파할 수 있어야 하고**
2. **다른 누군가가 만든 블록도 수신해서 반영할 수 있어야 해요**

---

우리는 오늘  
다음과 같은 구조를 실시간으로 구현할 거예요:

- `나 → 다른 노드들`  
  → **내가 만든 블록을 네트워크에 전파**
- `다른 노드들 → 나`  
  → **다른 노드가 만든 블록을 내가 받아들임**

---

이 흐름을 완성하면, 우리는 드디어  
**진짜 “분산 네트워크”**,  
**서로 신뢰를 주고받는 노드 구조**를 갖추게 됩니다.

# 이번 시간에는 뭐할까?

P2P입니당.

내일(금요일)까지 잡혀 있어요.

사실 저도 느꼈어요.  
어제 수업이 살짝 급하게 나간 느낌 있긴 있었어요.

근데 **정말로 급했던 건 아닙니다.**

---

## 왜 그랬을까?

우리가 갑자기 뭔가를 훅 들어간 게 아니라,  
사실은 **이미 기반이 다 준비돼 있었기 때문**이에요.

- 우리는 이미 **Socket**, **TCP 통신**, **포트의 의미**를 배웠고
- `listen()`이 뭔지, `connect()`가 뭔지도 알고 있고
- 메시지를 어떻게 만들고, 어떻게 전송할지도 경험해봤어요

그러니까 어제 수업이 빨리 흘러간 건,  
**이미 했던 수업을 기반으로 진행해야했기 때문입니다.**

---

## 그래서 오늘은?

오늘 수업은  
**여러분이 지금 어떤 걸 인지하고 있어야 하는지부터 정리**하고 갑니다.

### 수업 흐름은 이렇게 진행할게요:

1. **여러분이 지금 알고 있어야 할 인지 사항 정리**  
   → P2P 구조, 메서드 역할, 메시지 흐름에 대한 이해

2. **전체 코드 흐름을 함께 훑어봅니다**  
   → 각각의 파일이 어떤 역할을 하는지 짧고 정확하게

3. **필요한 메서드는 함께 정의합니다**  
   → 특히 `sendMessage()` 같은 핵심 도우미 함수

---

## 오늘 수업의 핵심

> 양이 많은 게 아닙니다.  
> 이미 알고 있는 내용을 조금씩 연결하는 것뿐이에요.

그리고 오늘 수업이 끝나면  
여러분은 **진짜 블록체인 노드 간 통신이 어떻게 작동하는지**  
코드 한 줄 한 줄로 직접 이해하고 있게 될 거예요.
